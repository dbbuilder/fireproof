import{d as te,r as i,b as o,f as t,p as U,e as m,h as d,I as n,t as v,w as S,q as x,v as T,A as p,J as z,y as V,K as se,s as b,x as D,i as ae,u as re,g as a}from"./vendor-8rVgzruD.js";import{a as le}from"./index-DcSKaWik.js";import{u as oe,r as ie}from"./XCircleIcon-CdsB511z.js";import{r as ne}from"./XMarkIcon-C76yCGqv.js";import{r as ue}from"./CheckCircleIcon-Bq29seAH.js";import{r as L}from"./UserIcon-Br6Ln9-1.js";import{r as de,a as ce}from"./EnvelopeIcon-DDPJ4GH_.js";import{r as I,a as J,b as Z}from"./LockClosedIcon-DHD7G0pt.js";const me={class:"min-h-screen bg-gray-50 flex items-center justify-center p-4"},ve={class:"max-w-md w-full"},fe={class:"card"},pe={class:"p-8"},we={key:0,class:"alert-danger mb-6","data-testid":"register-error"},ye={class:"text-sm font-medium"},ge={key:1,class:"alert-success mb-6","data-testid":"register-success"},he={class:"relative"},xe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},be={key:0,class:"form-error"},ke={class:"relative"},_e={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Pe={key:0,class:"form-error"},Ne={class:"relative"},Ce={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Ve={key:0,class:"form-error"},Ae={class:"relative"},Ee={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Se=["type"],Te={key:0,class:"mt-2"},Be={class:"flex items-center justify-between text-xs mb-1"},$e={class:"w-full bg-gray-200 rounded-full h-1.5"},qe={key:1,class:"form-error"},Me={key:2,class:"form-helper"},Re={class:"relative"},je={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Fe=["type"],Ue={key:0,class:"form-error"},ze={class:"flex items-start"},De={for:"terms",class:"ml-2 block text-sm text-gray-700"},Le={key:0,class:"form-error ml-6"},Ie=["disabled"],Je={key:0},Ze={key:1,class:"flex items-center justify-center"},He={class:"mt-6 text-center"},Ke={class:"mt-6 text-center"},at=te({__name:"RegisterView",setup(We){const H=re(),B=le(),A=oe(),s=i({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",acceptTerms:!1}),k=i(!1),_=i(!1),P=i(!1),E=i(!1),N=i(null),u=i("weak"),w=i(null),y=i(null),g=i(null),c=i(null),h=i(null),C=i(null),$=()=>(w.value=null,s.value.firstName?s.value.firstName.length<2?(w.value="First name must be at least 2 characters",!1):!0:(w.value="First name is required",!1)),q=()=>(y.value=null,s.value.lastName?s.value.lastName.length<2?(y.value="Last name must be at least 2 characters",!1):!0:(y.value="Last name is required",!1)),M=()=>(g.value=null,s.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value.email)?!0:(g.value="Please enter a valid email address",!1):(g.value="Email is required",!1)),K=()=>{const l=s.value.password;if(!l){u.value="weak";return}let e=0;l.length>=8&&e++,l.length>=12&&e++,/[a-z]/.test(l)&&e++,/[A-Z]/.test(l)&&e++,/[0-9]/.test(l)&&e++,/[^a-zA-Z0-9]/.test(l)&&e++,e<=2?u.value="weak":e<=4?u.value="medium":u.value="strong"},R=()=>(c.value=null,s.value.password?s.value.password.length<8?(c.value="Password must be at least 8 characters",!1):/[a-z]/.test(s.value.password)?/[A-Z]/.test(s.value.password)?/[0-9]/.test(s.value.password)?!0:(c.value="Password must contain at least one number",!1):(c.value="Password must contain at least one uppercase letter",!1):(c.value="Password must contain at least one lowercase letter",!1):(c.value="Password is required",!1)),j=()=>(h.value=null,s.value.confirmPassword?s.value.password!==s.value.confirmPassword?(h.value="Passwords do not match",!1):!0:(h.value="Please confirm your password",!1)),W=()=>(C.value=null,s.value.acceptTerms?!0:(C.value="You must accept the terms and conditions",!1)),Y=()=>{const l=$(),e=q(),f=M(),r=R(),X=j(),ee=W();return l&&e&&f&&r&&X&&ee},F=()=>{N.value=null,B.clearError()},G=async()=>{var l,e;if(F(),!!Y()){P.value=!0;try{await B.register({email:s.value.email,password:s.value.password,firstName:s.value.firstName,lastName:s.value.lastName}),E.value=!0,A.success("Account created successfully! Welcome to FireProof."),setTimeout(()=>{H.push("/dashboard")},2e3)}catch(f){N.value=((e=(l=f.response)==null?void 0:l.data)==null?void 0:e.message)||"Registration failed. Please try again.",console.error("Registration error:",f)}finally{P.value=!1}}},O=()=>{A.info("Terms of Service - Coming soon")},Q=()=>{A.info("Privacy Policy - Coming soon")};return(l,e)=>{const f=ae("router-link");return a(),o("div",me,[t("div",ve,[e[21]||(e[21]=U('<div class="text-center mb-8"><div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-primary-500 to-primary-600 shadow-glow mb-4"><svg class="w-10 h-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><h1 class="text-3xl font-display font-semibold text-gray-900 mb-2"> Create Account </h1><p class="text-gray-600"> Join FireProof to manage fire safety inspections </p></div>',1)),t("div",fe,[t("div",pe,[N.value?(a(),o("div",we,[d(n(ie),{class:"h-5 w-5"}),t("div",null,[t("p",ye,v(N.value),1)]),t("button",{type:"button",class:"text-red-400 hover:text-red-600","data-testid":"close-error",onClick:F},[d(n(ne),{class:"h-5 w-5"})])])):m("",!0),E.value?(a(),o("div",ge,[d(n(ue),{class:"h-5 w-5"}),e[8]||(e[8]=t("div",null,[t("p",{class:"text-sm font-medium"}," Account created successfully! "),t("p",{class:"text-xs mt-1"}," Redirecting to dashboard... ")],-1))])):m("",!0),E.value?m("",!0):(a(),o("form",{key:2,class:"space-y-5",onSubmit:S(G,["prevent"])},[t("div",null,[e[9]||(e[9]=t("label",{for:"firstName",class:"form-label"}," First Name ",-1)),t("div",he,[t("div",xe,[d(n(L),{class:"h-5 w-5 text-gray-400"})]),x(t("input",{id:"firstName","onUpdate:modelValue":e[0]||(e[0]=r=>s.value.firstName=r),type:"text",required:"",autocomplete:"given-name",class:p(["form-input pl-10",{"border-red-500 focus:ring-red-500":w.value}]),placeholder:"John","data-testid":"firstname-input",onBlur:$},null,34),[[T,s.value.firstName]])]),w.value?(a(),o("p",be,v(w.value),1)):m("",!0)]),t("div",null,[e[10]||(e[10]=t("label",{for:"lastName",class:"form-label"}," Last Name ",-1)),t("div",ke,[t("div",_e,[d(n(L),{class:"h-5 w-5 text-gray-400"})]),x(t("input",{id:"lastName","onUpdate:modelValue":e[1]||(e[1]=r=>s.value.lastName=r),type:"text",required:"",autocomplete:"family-name",class:p(["form-input pl-10",{"border-red-500 focus:ring-red-500":y.value}]),placeholder:"Doe","data-testid":"lastname-input",onBlur:q},null,34),[[T,s.value.lastName]])]),y.value?(a(),o("p",Pe,v(y.value),1)):m("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{for:"email",class:"form-label"}," Email Address ",-1)),t("div",Ne,[t("div",Ce,[d(n(de),{class:"h-5 w-5 text-gray-400"})]),x(t("input",{id:"email","onUpdate:modelValue":e[2]||(e[2]=r=>s.value.email=r),type:"email",required:"",autocomplete:"email",class:p(["form-input pl-10",{"border-red-500 focus:ring-red-500":g.value}]),placeholder:"john@example.com","data-testid":"register-email-input",onBlur:M},null,34),[[T,s.value.email]])]),g.value?(a(),o("p",Ve,v(g.value),1)):m("",!0)]),t("div",null,[e[13]||(e[13]=t("label",{for:"password",class:"form-label"}," Password ",-1)),t("div",Ae,[t("div",Ee,[d(n(I),{class:"h-5 w-5 text-gray-400"})]),x(t("input",{id:"password","onUpdate:modelValue":e[3]||(e[3]=r=>s.value.password=r),type:k.value?"text":"password",required:"",autocomplete:"new-password",class:p(["form-input pl-10 pr-10",{"border-red-500 focus:ring-red-500":c.value}]),placeholder:"••••••••","data-testid":"register-password-input",onInput:K,onBlur:R},null,42,Se),[[z,s.value.password]]),t("button",{type:"button",class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600","data-testid":"toggle-register-password-visibility",onClick:e[4]||(e[4]=r=>k.value=!k.value)},[k.value?(a(),V(n(Z),{key:1,class:"h-5 w-5"})):(a(),V(n(J),{key:0,class:"h-5 w-5"}))])]),s.value.password?(a(),o("div",Te,[t("div",Be,[e[12]||(e[12]=t("span",{class:"text-gray-600"},"Password strength:",-1)),t("span",{class:p({"text-red-600":u.value==="weak","text-accent-600":u.value==="medium","text-secondary-600":u.value==="strong"})},v(u.value.toUpperCase()),3)]),t("div",$e,[t("div",{class:p(["h-1.5 rounded-full transition-all duration-300",{"bg-red-500 w-1/3":u.value==="weak","bg-accent-500 w-2/3":u.value==="medium","bg-secondary-500 w-full":u.value==="strong"}])},null,2)])])):m("",!0),c.value?(a(),o("p",qe,v(c.value),1)):(a(),o("p",Me," Must be at least 8 characters with uppercase, lowercase, and number "))]),t("div",null,[e[14]||(e[14]=t("label",{for:"confirmPassword",class:"form-label"}," Confirm Password ",-1)),t("div",Re,[t("div",je,[d(n(I),{class:"h-5 w-5 text-gray-400"})]),x(t("input",{id:"confirmPassword","onUpdate:modelValue":e[5]||(e[5]=r=>s.value.confirmPassword=r),type:_.value?"text":"password",required:"",autocomplete:"new-password",class:p(["form-input pl-10 pr-10",{"border-red-500 focus:ring-red-500":h.value}]),placeholder:"••••••••","data-testid":"confirm-password-input",onBlur:j},null,42,Fe),[[z,s.value.confirmPassword]]),t("button",{type:"button",class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600","data-testid":"toggle-confirm-password-visibility",onClick:e[6]||(e[6]=r=>_.value=!_.value)},[_.value?(a(),V(n(Z),{key:1,class:"h-5 w-5"})):(a(),V(n(J),{key:0,class:"h-5 w-5"}))])]),h.value?(a(),o("p",Ue,v(h.value),1)):m("",!0)]),t("div",null,[t("div",ze,[x(t("input",{id:"terms","onUpdate:modelValue":e[7]||(e[7]=r=>s.value.acceptTerms=r),type:"checkbox",class:"h-4 w-4 mt-1 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","data-testid":"accept-terms-checkbox"},null,512),[[se,s.value.acceptTerms]]),t("label",De,[e[15]||(e[15]=b(" I agree to the ",-1)),t("a",{href:"#",class:"font-medium text-primary-600 hover:text-primary-500","data-testid":"terms-link",onClick:S(O,["prevent"])}," Terms of Service "),e[16]||(e[16]=b(" and ",-1)),t("a",{href:"#",class:"font-medium text-primary-600 hover:text-primary-500","data-testid":"privacy-link",onClick:S(Q,["prevent"])}," Privacy Policy ")])]),C.value?(a(),o("p",Le,v(C.value),1)):m("",!0)]),t("button",{type:"submit",disabled:P.value,class:"btn-primary w-full","data-testid":"register-submit-button"},[P.value?(a(),o("span",Ze,[...e[17]||(e[17]=[t("div",{class:"spinner mr-2"},null,-1),b(" Creating account... ",-1)])])):(a(),o("span",Je,"Create Account"))],8,Ie)],32)),e[19]||(e[19]=U('<div class="mt-6"><div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-gray-500"> Already have an account? </span></div></div></div>',1)),t("div",He,[d(f,{to:"/login",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors","data-testid":"login-link"},{default:D(()=>[...e[18]||(e[18]=[b(" Sign in to your account ",-1)])]),_:1})])])]),t("div",Ke,[d(f,{to:"/",class:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 transition-colors"},{default:D(()=>[d(n(ce),{class:"h-4 w-4 mr-2"}),e[20]||(e[20]=b(" Back to Home ",-1))]),_:1})])])])}}});export{at as default};
