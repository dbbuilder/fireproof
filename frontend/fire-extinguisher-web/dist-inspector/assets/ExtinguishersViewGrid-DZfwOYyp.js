import{d as $e,r as p,c as E,G as pe,o as he,a as De,b as i,f as e,e as f,D as me,F as j,E as q,A as V,t as d,y as de,h as x,L as re,w as H,x as w,T as X,M as Ie,q as b,C as J,g as l,s as ae,I as y,N as Oe,v as N,K as ye}from"./vendor-8rVgzruD.js";import{u as Ne}from"./extinguishers-BkjuEnvJ.js";import{u as Ae}from"./extinguisherTypes-8sTbIimK.js";import{u as Re}from"./locations-e0sVBKke.js";import{u as Ee,r as Le}from"./XCircleIcon-CdsB511z.js";import{a as ge,d as Ve,r as Me,A as Fe}from"./AppLayout-DVMZMm7i.js";import{_ as Ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as xe}from"./PlusIcon-D7fN4Pmp.js";import{r as Pe}from"./CheckCircleIcon-Bq29seAH.js";import{r as ze,a as Be}from"./SparklesIcon-DUx_KJ2Q.js";import{r as be}from"./XMarkIcon-C76yCGqv.js";import{r as He,a as je}from"./TrashIcon-DaLIbI_u.js";import{r as qe}from"./QrCodeIcon-B1HrmPyt.js";import"./index-DcSKaWik.js";import"./BuildingOfficeIcon-BZlVraTP.js";import"./InformationCircleIcon-B2m1JJFM.js";const Qe={class:"banded-grid","data-testid":"banded-grid"},Ye=["onClick","data-testid"],Xe={key:0,class:"sort-indicator"},Ge={key:0,class:"header-cell",style:{width:"50px"}},Ke={class:"grid-body","data-testid":"grid-body"},We=["data-testid"],Je=["onClick","onTouchstart"],Ze=["data-testid"],et={key:0,class:"grid-cell expand-cell",style:{width:"50px"}},tt=["onClick","data-testid","aria-label"],st=["data-testid"],at={key:1,class:"empty-state","data-testid":"grid-empty-state"},lt={class:"text-gray-500 text-center py-8"},ot={key:0,class:"grid-footer","data-testid":"grid-pagination"},it={class:"pagination-info"},nt={class:"pagination-controls"},rt=["disabled"],dt=["disabled"],ut={class:"page-numbers"},ct=["onClick","data-testid"],vt=["disabled"],ft=["disabled"],pt={class:"per-page-selector"},mt=$e({__name:"BandedGrid",props:{data:{},columns:{},expandable:{type:Boolean,default:!1},paginated:{type:Boolean,default:!0},itemsPerPage:{default:25},emptyMessage:{default:"No data available"},rowKey:{default:"id"},rowClass:{}},emits:["row-click","sort-change"],setup(I,{expose:_,emit:G}){const h=I,C=G,O=p(""),A=p("asc"),m=p(1),L=p(h.itemsPerPage),D=p(new Set),T=p(null),R=p(0),M=p(0),P=p(0),F=p(null),Z=p(null),$=p(window.innerWidth<768),K=E(()=>{const u=h.columns.map(r=>r.width||"minmax(100px, 1fr)");return h.expandable&&u.push("50px"),u.join(" ")}),c=E(()=>O.value?[...h.data].sort((u,r)=>{const o=u[O.value],v=r[O.value];if(o===v)return 0;const g=o<v?-1:1;return A.value==="asc"?g:-g}):h.data),n=E(()=>c.value.length),z=E(()=>h.paginated?Math.ceil(n.value/L.value):1),B=E(()=>h.paginated?(m.value-1)*L.value:0),le=E(()=>h.paginated?Math.min(B.value+L.value,n.value):n.value),Q=E(()=>h.paginated?c.value.slice(B.value,le.value):c.value),ee=E(()=>{const u=[];let o=Math.max(1,m.value-Math.floor(2.5)),v=Math.min(z.value,o+5-1);v-o<4&&(o=Math.max(1,v-5+1));for(let g=o;g<=v;g++)u.push(g);return u});function W(u){O.value===u?A.value=A.value==="asc"?"desc":"asc":(O.value=u,A.value="asc"),C("sort-change",O.value,A.value)}function Y(u,r){const o=k(u,r);D.value.has(o)?D.value.delete(o):D.value.add(o),C("row-click",u)}function k(u,r){return u[h.rowKey]??r}function U(u){u>=1&&u<=z.value&&(m.value=u)}pe(L,()=>{m.value=1}),pe(()=>h.data,()=>{m.value=1,D.value.clear(),T.value=null});function oe(u,r,o){$.value&&(R.value=u.touches[0].clientX,M.value=u.touches[0].clientY,F.value=r,Z.value=o)}function ie(u){if(!$.value||F.value===null)return;P.value=u.touches[0].clientX;const r=P.value-R.value,o=u.touches[0].clientY-M.value;Math.abs(r)>Math.abs(o)&&Math.abs(r)>10&&u.preventDefault()}function ne(){if(!$.value||F.value===null)return;const u=P.value-R.value,r=k(F.value,Z.value);u<-50?T.value=r:T.value=null,F.value=null,Z.value=null,R.value=0,P.value=0}const te=()=>{$.value=window.innerWidth<768,$.value||(T.value=null)};return _({goToPage:U,collapseAll:()=>{D.value.clear(),T.value=null},expandAll:()=>{h.data.forEach((u,r)=>{D.value.add(k(u,r))})}}),he(()=>{window.addEventListener("resize",te)}),De(()=>{window.removeEventListener("resize",te)}),(u,r)=>(l(),i("div",Qe,[e("div",{class:"grid-header","data-testid":"grid-header",style:me({gridTemplateColumns:K.value})},[(l(!0),i(j,null,q(I.columns,o=>(l(),i("div",{key:o.key,class:V(["header-cell",o.sortable&&"sortable"]),onClick:v=>o.sortable&&W(o.key),"data-testid":`header-${o.key}`},[e("span",null,d(o.label),1),o.sortable&&O.value===o.key?(l(),i("span",Xe,d(A.value==="asc"?"↑":"↓"),1)):f("",!0)],10,Ye))),128)),I.expandable?(l(),i("div",Ge)):f("",!0)],4),e("div",Ke,[Q.value.length>0?(l(!0),i(j,{key:0},q(Q.value,(o,v)=>(l(),i("div",{key:k(o,v),class:V(["grid-row-group",{expanded:D.value.has(k(o,v))}]),"data-testid":`row-${v}`},[e("div",{class:V(["grid-row",v%2===0?"row-even":"row-odd",I.rowClass&&I.rowClass(o),T.value===k(o,v)&&"swiped"]),style:me({gridTemplateColumns:K.value,transform:T.value===k(o,v)?"translateX(-80px)":"translateX(0)"}),onClick:g=>I.expandable&&Y(o,v),onTouchstart:g=>oe(g,o,v),onTouchmove:ie,onTouchend:ne},[(l(!0),i(j,null,q(I.columns,g=>(l(),i("div",{key:g.key,class:V(["grid-cell",g.align&&`text-${g.align}`]),"data-testid":`cell-${g.key}-${v}`},[re(u.$slots,`cell-${g.key}`,{row:o,value:o[g.key]},()=>[ae(d(g.format?g.format(o[g.key],o):o[g.key]),1)])],10,Ze))),128)),I.expandable?(l(),i("div",et,[e("button",{class:"expand-btn",onClick:H(g=>Y(o,v),["stop"]),"data-testid":`expand-btn-${v}`,"aria-label":D.value.has(k(o,v))?"Collapse":"Expand"},[(l(),i("svg",{class:V(["expand-icon",{rotated:D.value.has(k(o,v))}]),width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},[...r[6]||(r[6]=[e("path",{d:"M4 6l4 4 4-4z"},null,-1)])],2))],8,tt)])):f("",!0)],46,Je),x(X,{name:"expand"},{default:w(()=>[I.expandable&&D.value.has(k(o,v))?(l(),i("div",{key:0,class:V(["expanded-content",$.value&&"md:relative"]),"data-testid":`expanded-${v}`},[re(u.$slots,"expanded-content",{row:o,index:v},()=>[r[7]||(r[7]=e("div",{class:"p-4 text-gray-600"}," No expanded content defined ",-1))],!0)],10,st)):f("",!0)]),_:2},1024)],10,We))),128)):f("",!0),(l(),de(Ie,{to:"body"},[x(X,{name:"fade"},{default:w(()=>[D.value.size>0&&$.value?(l(),i("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:r[0]||(r[0]=(...o)=>u.collapseAll&&u.collapseAll(...o)),"data-testid":"bottom-sheet-overlay"})):f("",!0)]),_:1})])),Q.value.length===0?(l(),i("div",at,[re(u.$slots,"empty",{},()=>[e("p",lt,d(I.emptyMessage),1)])])):f("",!0)]),I.paginated&&z.value>1?(l(),i("div",ot,[e("div",it," Showing "+d(B.value+1)+" to "+d(le.value)+" of "+d(n.value)+" items ",1),e("div",nt,[e("button",{class:"pagination-btn",disabled:m.value===1,onClick:r[1]||(r[1]=o=>U(1)),"data-testid":"pagination-first"}," First ",8,rt),e("button",{class:"pagination-btn",disabled:m.value===1,onClick:r[2]||(r[2]=o=>U(m.value-1)),"data-testid":"pagination-prev"}," Previous ",8,dt),e("div",ut,[(l(!0),i(j,null,q(ee.value,o=>(l(),i("button",{key:o,class:V(["page-btn",{active:o===m.value}]),onClick:v=>U(o),"data-testid":`pagination-page-${o}`},d(o),11,ct))),128))]),e("button",{class:"pagination-btn",disabled:m.value===z.value,onClick:r[3]||(r[3]=o=>U(m.value+1)),"data-testid":"pagination-next"}," Next ",8,vt),e("button",{class:"pagination-btn",disabled:m.value===z.value,onClick:r[4]||(r[4]=o=>U(z.value)),"data-testid":"pagination-last"}," Last ",8,ft)]),e("div",pt,[r[9]||(r[9]=e("label",{for:"per-page"},"Per page:",-1)),b(e("select",{id:"per-page","onUpdate:modelValue":r[5]||(r[5]=o=>L.value=o),class:"per-page-select","data-testid":"pagination-per-page"},[...r[8]||(r[8]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)])],512),[[J,L.value]])])])):f("",!0)]))}}),yt=Ue(mt,[["__scopeId","data-v-b56ed6d7"]]),gt={key:0,class:"fixed top-0 left-0 right-0 z-50 flex items-center justify-center py-4 bg-primary-600 text-white shadow-lg","data-testid":"pull-to-refresh-indicator"},xt={key:0,class:"animate-spin h-5 w-5 mr-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},bt={key:1},ht={key:2},Dt={class:"flex justify-between items-center mb-8"},kt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8","data-testid":"stats-cards"},wt={class:"card","data-testid":"stat-card-total"},St={class:"p-4"},_t={class:"flex items-center justify-between"},Ct={class:"text-2xl font-bold text-gray-900","data-testid":"total-count"},Tt={class:"card","data-testid":"stat-card-active"},$t={class:"p-4"},It={class:"flex items-center justify-between"},Ot={class:"text-2xl font-bold text-secondary-600","data-testid":"active-count"},Nt={class:"card","data-testid":"stat-card-out-of-service"},At={class:"p-4"},Rt={class:"flex items-center justify-between"},Et={class:"text-2xl font-bold text-red-600","data-testid":"out-of-service-count"},Lt={class:"card","data-testid":"stat-card-need-attention"},Vt={class:"p-4"},Mt={class:"flex items-center justify-between"},Ft={class:"text-2xl font-bold text-accent-600","data-testid":"need-attention-count"},Ut={class:"card mb-6","data-testid":"filters-card"},Pt={class:"p-4"},zt={class:"flex justify-between items-center mb-4 md:hidden"},Bt={class:"flex flex-wrap gap-4"},Ht={class:"flex-1 min-w-[200px] w-full md:w-auto"},jt={class:"w-full md:w-64"},qt=["value"],Qt={class:"w-full md:w-64"},Yt=["value"],Xt={class:"w-full md:w-48"},Gt={key:0,class:"alert-danger mb-6"},Kt={class:"flex-1"},Wt={class:"text-sm font-medium"},Jt={key:1,class:"card"},Zt={class:"font-semibold text-gray-900"},es={key:0,class:"badge-danger text-xs"},ts={key:1,class:"badge-secondary text-xs"},ss={key:2,class:"badge-success text-xs"},as={class:"text-gray-700"},ls={class:"flex items-center text-gray-700"},os={class:"text-gray-600 text-sm"},is={key:1,class:"text-gray-400 text-sm"},ns={class:"flex space-x-2"},rs=["onClick"],ds=["onClick"],us=["onClick"],cs=["onClick"],vs={class:"p-6 bg-white"},fs={class:"grid grid-cols-2 lg:grid-cols-3 gap-6"},ps={class:"space-y-2 text-sm"},ms={key:0},ys={class:"text-gray-900 font-medium"},gs={key:1},xs={class:"text-gray-900 font-medium"},bs={key:2},hs={class:"text-gray-900"},Ds={key:3},ks={class:"text-gray-900"},ws={class:"space-y-2 text-sm"},Ss={key:0},_s={class:"text-gray-900"},Cs={key:1},Ts={class:"text-gray-900"},$s={key:2},Is={class:"text-gray-900"},Os={key:3},Ns={key:0},As={class:"space-y-2 text-sm"},Rs={key:0,class:"p-3 bg-red-50 border border-red-200 rounded"},Es={class:"text-red-900"},Ls={key:1,class:"text-gray-700"},Vs={key:3,class:"card","data-testid":"empty-state"},Ms={class:"p-12 text-center"},Fs={class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary-100 mb-4"},Us={class:"text-lg font-semibold text-gray-900 mb-2"},Ps={class:"text-gray-600 mb-6"},zs={class:"modal-container max-w-3xl"},Bs={class:"modal-content max-h-[90vh] overflow-y-auto"},Hs={class:"flex items-center justify-between mb-6 sticky top-0 bg-white pb-4 border-b"},js={class:"text-2xl font-display font-semibold text-gray-900"},qs={class:"grid grid-cols-2 gap-4"},Qs=["disabled"],Ys={class:"grid grid-cols-2 gap-4"},Xs=["value"],Gs=["value"],Ks={class:"grid grid-cols-2 gap-4"},Ws={class:"grid grid-cols-3 gap-4"},Js={key:0},Zs={class:"grid grid-cols-2 gap-4"},ea={key:0,class:"space-y-3 p-4 bg-gray-50 rounded-lg"},ta={class:"flex items-center"},sa={class:"flex items-center"},aa={key:0},la={class:"flex space-x-3 pt-4 sticky bottom-0 bg-white border-t"},oa=["disabled"],ia={key:0},na={key:1,class:"flex items-center justify-center"},ra=["disabled"],da={class:"modal-container max-w-md"},ua={class:"modal-content text-center"},ca={class:"text-xl font-semibold text-gray-900 mb-4"},va={class:"bg-white p-4 rounded-lg inline-block mb-4"},fa=["src"],Oa={__name:"ExtinguishersViewGrid",setup(I){const _=Ne(),G=Ae(),h=Re(),C=Ee(),O=p(!1),A=p(!1),m=p(!1),L=p(null),D=p(!1),T=p(null),R=p(!1),M=p(!1),P=p(0),F=p(0),Z=p(null),$=p(!1),K=p(window.innerWidth>=768),c=p({search:"",locationId:"",extinguisherTypeId:"",status:""}),n=p({extinguisherCode:"",serialNumber:"",locationId:"",extinguisherTypeId:"",assetTag:"",manufacturer:"",manufactureDate:"",installDate:"",lastServiceDate:"",locationDescription:"",floorLevel:"",notes:"",isActive:!0,isOutOfService:!1,outOfServiceReason:""}),z=[{key:"extinguisherCode",label:"Code",width:"150px",sortable:!0},{key:"status",label:"Status",width:"120px",sortable:!1},{key:"typeName",label:"Type",width:"180px",sortable:!0},{key:"locationName",label:"Location",width:"200px",sortable:!0},{key:"serialNumber",label:"Serial Number",width:"150px",sortable:!1},{key:"nextServiceDueDate",label:"Next Service",width:"150px",sortable:!0},{key:"actions",label:"Actions",width:"120px",sortable:!1,align:"center"}],B=E(()=>{let a=_.extinguishers;if(c.value.search){const t=c.value.search.toLowerCase();a=a.filter(s=>{var S,se,ve,fe;return((S=s.extinguisherCode)==null?void 0:S.toLowerCase().includes(t))||((se=s.serialNumber)==null?void 0:se.toLowerCase().includes(t))||((ve=s.manufacturer)==null?void 0:ve.toLowerCase().includes(t))||((fe=s.locationName)==null?void 0:fe.toLowerCase().includes(t))})}if(c.value.locationId&&(a=a.filter(t=>t.locationId===c.value.locationId)),c.value.extinguisherTypeId&&(a=a.filter(t=>t.extinguisherTypeId===c.value.extinguisherTypeId)),c.value.status)switch(c.value.status){case"active":a=a.filter(t=>t.isActive&&!t.isOutOfService);break;case"inactive":a=a.filter(t=>!t.isActive);break;case"out-of-service":a=a.filter(t=>t.isOutOfService);break;case"needs-attention":a=a.filter(t=>ee(t));break}return a}),le=E(()=>B.value.length),Q=E(()=>{const a=B.value;return{active:a.filter(t=>t.isActive&&!t.isOutOfService).length,outOfService:a.filter(t=>t.isOutOfService).length,needingAttention:a.filter(t=>ee(t)).length}}),ee=a=>{const t=new Date,s=new Date;s.setDate(t.getDate()+30);const S=a.nextServiceDueDate?new Date(a.nextServiceDueDate):null,se=a.nextHydroTestDueDate?new Date(a.nextHydroTestDueDate):null;return S&&S<=s||se&&se<=s},W=a=>a?new Date(a)<new Date:!1,Y=a=>{if(!a)return!1;const t=new Date(a),s=new Date,S=new Date;return S.setDate(s.getDate()+30),t>s&&t<=S},k=a=>a?new Date(a).toLocaleDateString():"Not set",U=()=>{c.value={search:"",locationId:"",extinguisherTypeId:"",status:""}},oe=a=>a.isOutOfService?"bg-red-50 border-l-4 border-red-500":ee(a)?"bg-accent-50 border-l-4 border-accent-500":"",ie=a=>{console.log("Row clicked:",a)},ne=(a,t)=>{console.log("Sort changed:",a,t)},te=()=>{o(),m.value=!1,O.value=!0},u=a=>{L.value=a.extinguisherId,n.value={extinguisherCode:a.extinguisherCode,serialNumber:a.serialNumber,locationId:a.locationId,extinguisherTypeId:a.extinguisherTypeId,assetTag:a.assetTag||"",manufacturer:a.manufacturer||"",manufactureDate:a.manufactureDate?a.manufactureDate.split("T")[0]:"",installDate:a.installDate?a.installDate.split("T")[0]:"",lastServiceDate:a.lastServiceDate?a.lastServiceDate.split("T")[0]:"",locationDescription:a.locationDescription||"",floorLevel:a.floorLevel||"",notes:a.notes||"",isActive:a.isActive,isOutOfService:a.isOutOfService,outOfServiceReason:a.outOfServiceReason||""},m.value=!0,O.value=!0},r=()=>{O.value=!1,setTimeout(()=>{o()},200)},o=()=>{m.value=!1,L.value=null,n.value={extinguisherCode:"",serialNumber:"",locationId:"",extinguisherTypeId:"",assetTag:"",manufacturer:"",manufactureDate:"",installDate:"",lastServiceDate:"",locationDescription:"",floorLevel:"",notes:"",isActive:!0,isOutOfService:!1,outOfServiceReason:""}},v=async()=>{var a,t;D.value=!0;try{const s={...n.value,assetTag:n.value.assetTag||null,manufacturer:n.value.manufacturer||null,manufactureDate:n.value.manufactureDate||null,installDate:n.value.installDate||null,lastServiceDate:n.value.lastServiceDate||null,locationDescription:n.value.locationDescription||null,floorLevel:n.value.floorLevel||null,notes:n.value.notes||null,outOfServiceReason:n.value.outOfServiceReason||null};m.value?(await _.updateExtinguisher(L.value,s),C.success("Extinguisher updated successfully")):(await _.createExtinguisher(s),C.success("Extinguisher created successfully")),r()}catch(s){console.error("Form submission error:",s),C.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to save extinguisher")}finally{D.value=!1}},g=async a=>{if(confirm(`Are you sure you want to delete "${a.extinguisherCode}"?

This action cannot be undone.`))try{await _.deleteExtinguisher(a.extinguisherId),C.success("Extinguisher deleted successfully")}catch(t){console.error("Failed to delete extinguisher:",t),C.error("Failed to delete extinguisher")}},ke=async a=>{try{await _.generateBarcode(a.extinguisherId),C.success("QR Code generated successfully"),T.value=a,A.value=!0}catch(t){console.error("Failed to generate QR code:",t),C.error("Failed to generate QR code")}},we=a=>{T.value=a,A.value=!0},ue=()=>{A.value=!1,T.value=null},Se=a=>{window.scrollY===0&&(P.value=a.touches[0].clientY)},_e=a=>{!M.value&&window.scrollY===0&&(F.value=a.touches[0].clientY,F.value-P.value>80?R.value=!0:R.value=!1)},Ce=async()=>{if(R.value&&!M.value){M.value=!0;try{await Promise.all([_.fetchExtinguishers(),G.fetchTypes(!0),h.fetchLocations()]),C.success("Data refreshed")}catch(a){console.error("Failed to refresh data:",a),C.error("Failed to refresh data")}finally{setTimeout(()=>{M.value=!1,R.value=!1,P.value=0,F.value=0},500)}}else R.value=!1},Te=()=>{$.value=!$.value},ce=()=>{K.value=window.innerWidth>=768,K.value&&($.value=!1)};return he(async()=>{try{await Promise.all([_.fetchExtinguishers(),G.fetchTypes(!0),h.fetchLocations()])}catch(a){console.error("Failed to load data:",a),C.error("Failed to load data")}window.addEventListener("resize",ce)}),De(()=>{window.removeEventListener("resize",ce)}),(a,t)=>(l(),de(Fe,null,{default:w(()=>[e("div",{ref_key:"contentContainer",ref:Z,class:"relative",onTouchstart:Se,onTouchmove:_e,onTouchend:Ce},[x(X,{name:"fade"},{default:w(()=>[R.value?(l(),i("div",gt,[M.value?(l(),i("svg",xt,[...t[20]||(t[20]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(l(),i("span",bt,"↓ Pull to refresh")),M.value?(l(),i("span",ht,"Refreshing...")):f("",!0)])):f("",!0)]),_:1}),e("div",Dt,[t[22]||(t[22]=e("div",null,[e("h1",{class:"text-3xl font-display font-semibold text-gray-900 mb-2","data-testid":"page-heading"}," Fire Extinguishers "),e("p",{class:"text-gray-600"}," Manage fire extinguisher inventory and track service schedules ")],-1)),e("button",{class:"btn-primary inline-flex items-center",onClick:te,"data-testid":"new-extinguisher-button"},[x(y(xe),{class:"h-5 w-5 mr-2"}),t[21]||(t[21]=ae(" Add Extinguisher ",-1))])]),e("div",kt,[e("div",wt,[e("div",St,[e("div",_t,[e("div",null,[t[23]||(t[23]=e("p",{class:"text-sm text-gray-600"},"Total",-1)),e("p",Ct,d(le.value),1)]),x(y(ge),{class:"h-8 w-8 text-gray-400"})])])]),e("div",Tt,[e("div",$t,[e("div",It,[e("div",null,[t[24]||(t[24]=e("p",{class:"text-sm text-gray-600"},"Active",-1)),e("p",Ot,d(Q.value.active),1)]),x(y(Pe),{class:"h-8 w-8 text-secondary-400"})])])]),e("div",Nt,[e("div",At,[e("div",Rt,[e("div",null,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Out of Service",-1)),e("p",Et,d(Q.value.outOfService),1)]),x(y(Ve),{class:"h-8 w-8 text-red-400"})])])]),e("div",Lt,[e("div",Vt,[e("div",Mt,[e("div",null,[t[26]||(t[26]=e("p",{class:"text-sm text-gray-600"},"Need Attention",-1)),e("p",Ft,d(Q.value.needingAttention),1)]),x(y(ze),{class:"h-8 w-8 text-accent-400"})])])])]),e("div",Ut,[e("div",Pt,[e("div",zt,[t[27]||(t[27]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Filters",-1)),e("button",{onClick:Te,class:"text-primary-600 hover:text-primary-800 transition-colors","data-testid":"toggle-filters-button"},d($.value?"Hide":"Show"),1)]),x(X,{name:"expand"},{default:w(()=>[b(e("div",Bt,[e("div",Ht,[t[28]||(t[28]=e("label",{for:"search",class:"form-label"},"Search",-1)),b(e("input",{id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>c.value.search=s),type:"text",class:"form-input",placeholder:"Search code, serial number, or manufacturer...","data-testid":"filter-search"},null,512),[[N,c.value.search]])]),e("div",jt,[t[30]||(t[30]=e("label",{for:"locationFilter",class:"form-label"},"Location",-1)),b(e("select",{id:"locationFilter","onUpdate:modelValue":t[1]||(t[1]=s=>c.value.locationId=s),class:"form-input","data-testid":"filter-location"},[t[29]||(t[29]=e("option",{value:""},"All Locations",-1)),(l(!0),i(j,null,q(y(h).locations,s=>(l(),i("option",{key:s.locationId,value:s.locationId},d(s.locationName),9,qt))),128))],512),[[J,c.value.locationId]])]),e("div",Qt,[t[32]||(t[32]=e("label",{for:"typeFilter",class:"form-label"},"Type",-1)),b(e("select",{id:"typeFilter","onUpdate:modelValue":t[2]||(t[2]=s=>c.value.extinguisherTypeId=s),class:"form-input","data-testid":"filter-type"},[t[31]||(t[31]=e("option",{value:""},"All Types",-1)),(l(!0),i(j,null,q(y(G).types,s=>(l(),i("option",{key:s.extinguisherTypeId,value:s.extinguisherTypeId},d(s.typeName),9,Yt))),128))],512),[[J,c.value.extinguisherTypeId]])]),e("div",Xt,[t[34]||(t[34]=e("label",{for:"statusFilter",class:"form-label"},"Status",-1)),b(e("select",{id:"statusFilter","onUpdate:modelValue":t[3]||(t[3]=s=>c.value.status=s),class:"form-input","data-testid":"filter-status"},[...t[33]||(t[33]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"out-of-service"},"Out of Service",-1),e("option",{value:"needs-attention"},"Needs Attention",-1)])],512),[[J,c.value.status]])]),e("div",{class:"flex items-end"},[e("button",{class:"btn-outline",onClick:U,"data-testid":"filter-reset"}," Reset ")])],512),[[Oe,$.value||K.value]])]),_:1})])]),y(_).error?(l(),i("div",Gt,[x(y(Le),{class:"h-5 w-5"}),e("div",Kt,[e("p",Wt,d(y(_).error),1)]),e("button",{type:"button",class:"text-red-400 hover:text-red-600",onClick:t[4]||(t[4]=s=>y(_).clearError())},[x(y(be),{class:"h-5 w-5"})])])):f("",!0),y(_).loading&&y(_).extinguishers.length===0?(l(),i("div",Jt,[...t[35]||(t[35]=[e("div",{class:"p-12 text-center"},[e("div",{class:"spinner-lg mx-auto mb-4"}),e("p",{class:"text-gray-600"},"Loading extinguishers...")],-1)])])):B.value.length>0?(l(),de(yt,{key:2,data:B.value,columns:z,expandable:!0,paginated:!0,"items-per-page":50,"row-key":"extinguisherId","row-class":oe,"empty-message":"No extinguishers match your filters",onRowClick:ie,onSortChange:ne},{"cell-extinguisherCode":w(({row:s})=>[e("div",Zt,d(s.extinguisherCode),1)]),"cell-status":w(({row:s})=>[s.isOutOfService?(l(),i("span",es," Out of Service ")):s.isActive?(l(),i("span",ss," Active ")):(l(),i("span",ts," Inactive "))]),"cell-typeName":w(({row:s})=>[e("span",as,d(s.typeName||"Unknown"),1)]),"cell-locationName":w(({row:s})=>[e("div",ls,[x(y(Me),{class:"h-4 w-4 mr-1.5 text-gray-400"}),ae(" "+d(s.locationName||"No Location"),1)])]),"cell-serialNumber":w(({row:s})=>[e("span",os,d(s.serialNumber),1)]),"cell-nextServiceDueDate":w(({row:s})=>[s.nextServiceDueDate?(l(),i("span",{key:0,class:V({"text-red-600 font-semibold":W(s.nextServiceDueDate),"text-accent-600 font-semibold":Y(s.nextServiceDueDate),"text-gray-600":!W(s.nextServiceDueDate)&&!Y(s.nextServiceDueDate)})},d(k(s.nextServiceDueDate)),3)):(l(),i("span",is,"Not set"))]),"cell-actions":w(({row:s})=>[e("div",ns,[e("button",{class:"text-primary-600 hover:text-primary-800 transition-colors",onClick:H(S=>u(s),["stop"]),title:"Edit","data-testid":"edit-button"},[x(y(He),{class:"h-4 w-4"})],8,rs),s.qrCodeData?(l(),i("button",{key:0,class:"text-secondary-600 hover:text-secondary-800 transition-colors",onClick:H(S=>we(s),["stop"]),title:"View QR Code","data-testid":"qr-button"},[x(y(qe),{class:"h-4 w-4"})],8,ds)):(l(),i("button",{key:1,class:"text-secondary-600 hover:text-secondary-800 transition-colors",onClick:H(S=>ke(s),["stop"]),title:"Generate QR Code","data-testid":"generate-qr-button"},[x(y(Be),{class:"h-4 w-4"})],8,us)),e("button",{class:"text-red-600 hover:text-red-800 transition-colors",onClick:H(S=>g(s),["stop"]),title:"Delete","data-testid":"delete-button"},[x(y(je),{class:"h-4 w-4"})],8,cs)])]),"expanded-content":w(({row:s})=>[e("div",vs,[e("div",fs,[e("div",null,[t[40]||(t[40]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Details",-1)),e("dl",ps,[s.manufacturer?(l(),i("div",ms,[t[36]||(t[36]=e("dt",{class:"text-gray-500"},"Manufacturer",-1)),e("dd",ys,d(s.manufacturer),1)])):f("",!0),s.assetTag?(l(),i("div",gs,[t[37]||(t[37]=e("dt",{class:"text-gray-500"},"Asset Tag",-1)),e("dd",xs,d(s.assetTag),1)])):f("",!0),s.floorLevel?(l(),i("div",bs,[t[38]||(t[38]=e("dt",{class:"text-gray-500"},"Floor Level",-1)),e("dd",hs,d(s.floorLevel),1)])):f("",!0),s.locationDescription?(l(),i("div",Ds,[t[39]||(t[39]=e("dt",{class:"text-gray-500"},"Location Description",-1)),e("dd",ks,d(s.locationDescription),1)])):f("",!0)])]),e("div",null,[t[45]||(t[45]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Service History",-1)),e("dl",ws,[s.manufactureDate?(l(),i("div",Ss,[t[41]||(t[41]=e("dt",{class:"text-gray-500"},"Manufacture Date",-1)),e("dd",_s,d(k(s.manufactureDate)),1)])):f("",!0),s.installDate?(l(),i("div",Cs,[t[42]||(t[42]=e("dt",{class:"text-gray-500"},"Install Date",-1)),e("dd",Ts,d(k(s.installDate)),1)])):f("",!0),s.lastServiceDate?(l(),i("div",$s,[t[43]||(t[43]=e("dt",{class:"text-gray-500"},"Last Service",-1)),e("dd",Is,d(k(s.lastServiceDate)),1)])):f("",!0),s.nextHydroTestDueDate?(l(),i("div",Os,[t[44]||(t[44]=e("dt",{class:"text-gray-500"},"Next Hydro Test",-1)),e("dd",{class:V({"text-red-600 font-semibold":W(s.nextHydroTestDueDate),"text-accent-600 font-semibold":Y(s.nextHydroTestDueDate),"text-gray-900":!W(s.nextHydroTestDueDate)&&!Y(s.nextHydroTestDueDate)})},d(k(s.nextHydroTestDueDate)),3)])):f("",!0)])]),s.notes||s.outOfServiceReason?(l(),i("div",Ns,[t[48]||(t[48]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Notes",-1)),e("div",As,[s.outOfServiceReason?(l(),i("div",Rs,[t[46]||(t[46]=e("p",{class:"text-xs font-semibold text-red-700 mb-1"},"Out of Service Reason:",-1)),e("p",Es,d(s.outOfServiceReason),1)])):f("",!0),s.notes?(l(),i("div",Ls,[t[47]||(t[47]=e("p",{class:"text-gray-500 mb-1"},"General Notes:",-1)),e("p",null,d(s.notes),1)])):f("",!0)])])):f("",!0)])])]),_:1},8,["data"])):(l(),i("div",Vs,[e("div",Ms,[e("div",Fs,[x(y(ge),{class:"h-8 w-8 text-primary-600"})]),e("h3",Us,d(c.value.search||c.value.locationId||c.value.extinguisherTypeId||c.value.status?"No matching extinguishers":"No extinguishers yet"),1),e("p",Ps,d(c.value.search||c.value.locationId||c.value.extinguisherTypeId||c.value.status?"Try adjusting your filters":"Get started by adding your first fire extinguisher"),1),!c.value.search&&!c.value.locationId&&!c.value.extinguisherTypeId&&!c.value.status?(l(),i("button",{key:0,class:"btn-primary inline-flex items-center",onClick:te},[x(y(xe),{class:"h-5 w-5 mr-2"}),t[49]||(t[49]=ae(" Add First Extinguisher ",-1))])):(l(),i("button",{key:1,class:"btn-outline",onClick:U}," Reset Filters "))])]))],544),x(X,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:w(()=>[O.value?(l(),i("div",{key:0,class:"modal-overlay",onClick:H(r,["self"])},[x(X,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:w(()=>[e("div",zs,[e("div",Bs,[e("div",Hs,[e("h2",js,d(m.value?"Edit Extinguisher":"Add New Extinguisher"),1),e("button",{type:"button",class:"text-gray-400 hover:text-gray-600 transition-colors",onClick:r},[x(y(be),{class:"h-6 w-6"})])]),e("form",{class:"space-y-5",onSubmit:H(v,["prevent"])},[e("div",qs,[e("div",null,[t[50]||(t[50]=e("label",{for:"extinguisherCode",class:"form-label"}," Extinguisher Code * ",-1)),b(e("input",{id:"extinguisherCode","onUpdate:modelValue":t[5]||(t[5]=s=>n.value.extinguisherCode=s),type:"text",required:"",disabled:m.value,class:V(["form-input",{"bg-gray-50":m.value}]),placeholder:"EXT-001"},null,10,Qs),[[N,n.value.extinguisherCode]]),t[51]||(t[51]=e("p",{class:"form-helper"}," Unique identifier (cannot be changed) ",-1))]),e("div",null,[t[52]||(t[52]=e("label",{for:"serialNumber",class:"form-label"}," Serial Number * ",-1)),b(e("input",{id:"serialNumber","onUpdate:modelValue":t[6]||(t[6]=s=>n.value.serialNumber=s),type:"text",required:"",class:"form-input",placeholder:"SN123456"},null,512),[[N,n.value.serialNumber]])])]),e("div",Ys,[e("div",null,[t[54]||(t[54]=e("label",{for:"locationId",class:"form-label"}," Location * ",-1)),b(e("select",{id:"locationId","onUpdate:modelValue":t[7]||(t[7]=s=>n.value.locationId=s),required:"",class:"form-input"},[t[53]||(t[53]=e("option",{value:""}," Select location... ",-1)),(l(!0),i(j,null,q(y(h).locations,s=>(l(),i("option",{key:s.locationId,value:s.locationId},d(s.locationName),9,Xs))),128))],512),[[J,n.value.locationId]])]),e("div",null,[t[56]||(t[56]=e("label",{for:"extinguisherTypeId",class:"form-label"}," Extinguisher Type * ",-1)),b(e("select",{id:"extinguisherTypeId","onUpdate:modelValue":t[8]||(t[8]=s=>n.value.extinguisherTypeId=s),required:"",class:"form-input"},[t[55]||(t[55]=e("option",{value:""}," Select type... ",-1)),(l(!0),i(j,null,q(y(G).activeTypes,s=>(l(),i("option",{key:s.extinguisherTypeId,value:s.extinguisherTypeId},d(s.typeName)+" ("+d(s.agentType)+") ",9,Gs))),128))],512),[[J,n.value.extinguisherTypeId]])])]),e("div",Ks,[e("div",null,[t[57]||(t[57]=e("label",{for:"manufacturer",class:"form-label"}," Manufacturer ",-1)),b(e("input",{id:"manufacturer","onUpdate:modelValue":t[9]||(t[9]=s=>n.value.manufacturer=s),type:"text",class:"form-input",placeholder:"Ansul, Amerex, etc."},null,512),[[N,n.value.manufacturer]])]),e("div",null,[t[58]||(t[58]=e("label",{for:"assetTag",class:"form-label"}," Asset Tag ",-1)),b(e("input",{id:"assetTag","onUpdate:modelValue":t[10]||(t[10]=s=>n.value.assetTag=s),type:"text",class:"form-input",placeholder:"ASSET-001"},null,512),[[N,n.value.assetTag]])])]),e("div",Ws,[e("div",null,[t[59]||(t[59]=e("label",{for:"manufactureDate",class:"form-label"}," Manufacture Date ",-1)),b(e("input",{id:"manufactureDate","onUpdate:modelValue":t[11]||(t[11]=s=>n.value.manufactureDate=s),type:"date",class:"form-input"},null,512),[[N,n.value.manufactureDate]])]),e("div",null,[t[60]||(t[60]=e("label",{for:"installDate",class:"form-label"}," Install Date ",-1)),b(e("input",{id:"installDate","onUpdate:modelValue":t[12]||(t[12]=s=>n.value.installDate=s),type:"date",class:"form-input"},null,512),[[N,n.value.installDate]])]),m.value?(l(),i("div",Js,[t[61]||(t[61]=e("label",{for:"lastServiceDate",class:"form-label"}," Last Service Date ",-1)),b(e("input",{id:"lastServiceDate","onUpdate:modelValue":t[13]||(t[13]=s=>n.value.lastServiceDate=s),type:"date",class:"form-input"},null,512),[[N,n.value.lastServiceDate]])])):f("",!0)]),e("div",null,[t[62]||(t[62]=e("label",{for:"locationDescription",class:"form-label"}," Location Description ",-1)),b(e("input",{id:"locationDescription","onUpdate:modelValue":t[14]||(t[14]=s=>n.value.locationDescription=s),type:"text",class:"form-input",placeholder:"Near main entrance, by stairwell A, etc."},null,512),[[N,n.value.locationDescription]])]),e("div",Zs,[e("div",null,[t[63]||(t[63]=e("label",{for:"floorLevel",class:"form-label"}," Floor Level ",-1)),b(e("input",{id:"floorLevel","onUpdate:modelValue":t[15]||(t[15]=s=>n.value.floorLevel=s),type:"text",class:"form-input",placeholder:"1st Floor, Basement, etc."},null,512),[[N,n.value.floorLevel]])])]),e("div",null,[t[64]||(t[64]=e("label",{for:"notes",class:"form-label"}," Notes ",-1)),b(e("textarea",{id:"notes","onUpdate:modelValue":t[16]||(t[16]=s=>n.value.notes=s),rows:"3",class:"form-input",placeholder:"Additional notes..."},null,512),[[N,n.value.notes]])]),m.value?(l(),i("div",ea,[e("div",ta,[b(e("input",{id:"isActive","onUpdate:modelValue":t[17]||(t[17]=s=>n.value.isActive=s),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[ye,n.value.isActive]]),t[65]||(t[65]=e("label",{for:"isActive",class:"ml-2 block text-sm text-gray-700"}," Active extinguisher ",-1))]),e("div",sa,[b(e("input",{id:"isOutOfService","onUpdate:modelValue":t[18]||(t[18]=s=>n.value.isOutOfService=s),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[ye,n.value.isOutOfService]]),t[66]||(t[66]=e("label",{for:"isOutOfService",class:"ml-2 block text-sm text-gray-700"}," Out of service ",-1))]),n.value.isOutOfService?(l(),i("div",aa,[t[67]||(t[67]=e("label",{for:"outOfServiceReason",class:"form-label"}," Out of Service Reason ",-1)),b(e("textarea",{id:"outOfServiceReason","onUpdate:modelValue":t[19]||(t[19]=s=>n.value.outOfServiceReason=s),rows:"2",class:"form-input",placeholder:"Reason for being out of service..."},null,512),[[N,n.value.outOfServiceReason]])])):f("",!0)])):f("",!0),e("div",la,[e("button",{type:"submit",disabled:D.value,class:"btn-primary flex-1"},[D.value?(l(),i("span",na,[t[68]||(t[68]=e("div",{class:"spinner mr-2"},null,-1)),ae(" "+d(m.value?"Updating...":"Creating..."),1)])):(l(),i("span",ia,d(m.value?"Update Extinguisher":"Create Extinguisher"),1))],8,oa),e("button",{type:"button",disabled:D.value,class:"btn-outline",onClick:r}," Cancel ",8,ra)])],32)])])]),_:1})])):f("",!0)]),_:1}),x(X,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:w(()=>{var s,S;return[A.value?(l(),i("div",{key:0,class:"modal-overlay",onClick:H(ue,["self"])},[e("div",da,[e("div",ua,[e("h3",ca," QR Code for "+d((s=T.value)==null?void 0:s.extinguisherCode),1),e("div",va,[e("img",{src:(S=T.value)==null?void 0:S.qrCodeData,alt:"QR Code",class:"w-64 h-64"},null,8,fa)]),t[69]||(t[69]=e("p",{class:"text-sm text-gray-600 mb-4"}," Scan this code to quickly access extinguisher information ",-1)),e("button",{class:"btn-primary",onClick:ue}," Close ")])])])):f("",!0)]}),_:1})]),_:1}))}};export{Oa as default};
