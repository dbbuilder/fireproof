import{j as y}from"./vendor-8rVgzruD.js";import{b as a}from"./index-DcSKaWik.js";const o={async getAll(e=null){const t=e!==null?{isActive:e}:{};return(await a.get("/extinguishertypes",{params:t})).data},async getById(e){return(await a.get(`/extinguishertypes/${e}`)).data},async create(e){return(await a.post("/extinguishertypes",e)).data},async update(e,t){return(await a.put(`/extinguishertypes/${e}`,t)).data},async delete(e){await a.delete(`/extinguishertypes/${e}`)}},c=y("extinguisherTypes",{state:()=>({types:[],currentType:null,loading:!1,error:null}),getters:{activeTypes:e=>e.types.filter(t=>t.isActive),typeCount:e=>e.types.length,getTypeById:e=>t=>e.types.find(s=>s.extinguisherTypeId===t),typesByAgent:e=>{const t={};return e.types.forEach(s=>{const r=s.agentType||"Other";t[r]||(t[r]=[]),t[r].push(s)}),t}},actions:{async fetchTypes(e=null){var t,s;this.loading=!0,this.error=null;try{this.types=await o.getAll(e)}catch(r){throw this.error=((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to fetch extinguisher types",console.error("Error fetching extinguisher types:",r),r}finally{this.loading=!1}},async fetchTypeById(e){var t,s;this.loading=!0,this.error=null;try{return this.currentType=await o.getById(e),this.currentType}catch(r){throw this.error=((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to fetch extinguisher type",console.error("Error fetching extinguisher type:",r),r}finally{this.loading=!1}},async createType(e){var t,s;this.loading=!0,this.error=null;try{const r=await o.create(e);return this.types.push(r),r}catch(r){throw this.error=((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to create extinguisher type",console.error("Error creating extinguisher type:",r),r}finally{this.loading=!1}},async updateType(e,t){var s,r,i;this.loading=!0,this.error=null;try{const n=await o.update(e,t),p=this.types.findIndex(h=>h.extinguisherTypeId===e);return p!==-1&&(this.types[p]=n),((s=this.currentType)==null?void 0:s.extinguisherTypeId)===e&&(this.currentType=n),n}catch(n){throw this.error=((i=(r=n.response)==null?void 0:r.data)==null?void 0:i.message)||"Failed to update extinguisher type",console.error("Error updating extinguisher type:",n),n}finally{this.loading=!1}},async deleteType(e){var t,s,r;this.loading=!0,this.error=null;try{await o.delete(e),this.types=this.types.filter(i=>i.extinguisherTypeId!==e),((t=this.currentType)==null?void 0:t.extinguisherTypeId)===e&&(this.currentType=null)}catch(i){throw this.error=((r=(s=i.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to delete extinguisher type",console.error("Error deleting extinguisher type:",i),i}finally{this.loading=!1}},clearError(){this.error=null}}});export{c as u};
