import{d as V,r as u,o as F,b as l,f as e,e as r,h as R,x as S,i as D,I as L,H as j,A as d,t as n,F as p,E as v,w as N,g as o}from"./vendor-8rVgzruD.js";import{u as T}from"./inspectionsPhase1-lLNUs6w2.js";import"./index-DcSKaWik.js";const A={class:"min-h-screen bg-gray-50"},E={class:"bg-white border-b border-gray-200 sticky top-0 z-10"},H={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},$={class:"flex items-center justify-between h-16"},U={key:0,class:"max-w-2xl mx-auto px-4 py-6 sm:px-6 lg:px-8 space-y-6"},q={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4 animate-slide-down"},G={class:"bg-white rounded-lg shadow-soft p-6"},J={class:"flex items-center justify-between mb-4"},K={class:"flex items-center"},O={class:"text-2xl font-bold text-gray-900 mt-2"},Q={key:0,class:"h-8 w-8",fill:"currentColor",viewBox:"0 0 20 20"},W={key:1,class:"h-8 w-8",fill:"currentColor",viewBox:"0 0 20 20"},X={key:2,class:"h-8 w-8",fill:"currentColor",viewBox:"0 0 20 20"},Y={class:"grid grid-cols-2 gap-4 mt-6"},Z={class:"text-sm font-medium text-gray-900 mt-1"},ee={class:"text-sm font-medium text-gray-900 mt-1"},te={class:"text-sm font-medium text-gray-900 mt-1"},se={class:"text-sm font-medium text-gray-900 mt-1"},le={key:0,class:"mt-4 pt-4 border-t border-gray-200"},oe={class:"flex items-center text-sm text-gray-900"},ie={key:1,class:"mt-4 pt-4 border-t border-gray-200"},ne={class:"flex items-center justify-between"},ae={class:"flex items-center"},re={class:"text-sm font-medium text-gray-900"},de={key:1,class:"text-sm text-gray-500"},ce={key:1,class:"bg-white rounded-lg shadow-soft p-6"},ue={class:"space-y-3"},ge={class:"flex-1"},xe={class:"text-sm font-medium text-gray-900"},pe={key:0,class:"text-sm text-gray-600 mt-1"},ve={key:2,class:"bg-white rounded-lg shadow-soft p-6"},me={class:"text-lg font-semibold text-gray-900 mb-4"},ye={class:"grid grid-cols-3 gap-3"},fe=["onClick"],he=["src","alt"],be={key:3,class:"bg-white rounded-lg shadow-soft p-6"},we={class:"text-lg font-semibold text-gray-900 mb-4"},_e={class:"space-y-3"},ke={class:"flex items-start justify-between mb-2"},Ce={class:"font-medium text-gray-900"},Ie={class:"text-sm text-gray-600"},ze={class:"mt-2 flex items-center text-xs text-gray-500"},Be={key:4,class:"bg-white rounded-lg shadow-soft p-6"},Me={class:"text-sm text-gray-700 whitespace-pre-wrap"},Pe={key:5,class:"bg-white rounded-lg shadow-soft p-6"},Ve={class:"text-base font-medium text-gray-900 italic"},Fe={class:"text-xs text-gray-500 mt-1"},Re={key:1,class:"flex items-center justify-center min-h-screen"},Te=V({__name:"InspectionPhase1DetailView",setup(Se){const m=j(),y=T(),s=u(null),g=u(!1),x=u(!1),c=u(!1),f=i=>new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),h=i=>({Scheduled:"bg-blue-100 text-blue-800",InProgress:"bg-yellow-100 text-yellow-800",Completed:"bg-green-100 text-green-800",Failed:"bg-red-100 text-red-800",Cancelled:"bg-gray-100 text-gray-800"})[i]||"bg-gray-100 text-gray-800",b=i=>({Pass:"bg-green-100 text-green-800",Fail:"bg-red-100 text-red-800",ConditionalPass:"bg-yellow-100 text-yellow-800"})[i]||"bg-gray-100 text-gray-800",w=i=>({Pass:"bg-green-100 text-green-600",Fail:"bg-red-100 text-red-600",ConditionalPass:"bg-yellow-100 text-yellow-600"})[i]||"bg-gray-100 text-gray-600",_=i=>({Pass:"bg-green-100 text-green-800",Fail:"bg-red-100 text-red-800","N/A":"bg-gray-100 text-gray-800"})[i]||"bg-gray-100 text-gray-800",k=i=>({Critical:"bg-red-100 text-red-800",High:"bg-orange-100 text-orange-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-blue-100 text-blue-800"})[i]||"bg-gray-100 text-gray-800",C=async()=>{if(s.value){x.value=!0;try{const i=await y.verifyIntegrity(s.value.inspectionId);i.isValid?alert(`✓ Inspection integrity verified!

This inspection has not been tampered with.`):alert(`⚠ Integrity Verification Failed!

`+i.validationMessage)}catch{alert("Failed to verify inspection integrity")}finally{x.value=!1}}},I=i=>{window.open(i.blobUrl,"_blank")},z=()=>{alert("PDF export will be implemented"),c.value=!1},B=()=>{var i;navigator.share?navigator.share({title:"Inspection Report",text:`Fire Extinguisher Inspection - ${(i=s.value)==null?void 0:i.extinguisherAssetTag}`,url:window.location.href}):alert("Sharing is not supported on this device"),c.value=!1},M=async()=>{g.value=!0;try{const i=m.params.id;s.value=await y.fetchInspectionById(i,!0)}catch(i){console.error("Error loading inspection:",i)}finally{g.value=!1}};return F(()=>{M()}),(i,t)=>{const P=D("router-link");return o(),l("div",A,[e("div",E,[e("div",H,[e("div",$,[R(P,{to:"/inspections",class:"flex items-center text-gray-600 hover:text-gray-900"},{default:S(()=>[...t[4]||(t[4]=[e("svg",{class:"h-6 w-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),e("span",{class:"font-medium"},"Back",-1)])]),_:1}),t[6]||(t[6]=e("h1",{class:"text-lg font-semibold text-gray-900"}," Inspection Details ",-1)),e("button",{class:"text-gray-600 hover:text-gray-900",onClick:t[0]||(t[0]=a=>c.value=!0)},[...t[5]||(t[5]=[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})],-1)])])])])]),s.value?(o(),l("div",U,[L(m).query.completed==="true"?(o(),l("div",q,[...t[7]||(t[7]=[e("div",{class:"flex"},[e("svg",{class:"h-5 w-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("p",{class:"text-sm text-green-800 font-medium"}," Inspection completed successfully! ")],-1)])])):r("",!0),e("div",G,[e("div",J,[e("div",null,[e("div",K,[e("span",{class:d([h(s.value.status),"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium"])},n(s.value.status),3),s.value.overallResult?(o(),l("span",{key:0,class:d([b(s.value.overallResult),"ml-2 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium"])},n(s.value.overallResult),3)):r("",!0)]),e("h2",O,n(s.value.inspectionType),1)]),s.value.overallResult?(o(),l("div",{key:0,class:d([w(s.value.overallResult),"flex-shrink-0 w-16 h-16 rounded-full flex items-center justify-center"])},[s.value.overallResult==="Pass"?(o(),l("svg",Q,[...t[8]||(t[8]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):s.value.overallResult==="Fail"?(o(),l("svg",W,[...t[9]||(t[9]=[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])])):(o(),l("svg",X,[...t[10]||(t[10]=[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)])]))],2)):r("",!0)]),e("div",Y,[e("div",null,[t[11]||(t[11]=e("p",{class:"text-xs text-gray-500 uppercase tracking-wide"}," Extinguisher ",-1)),e("p",Z,n(s.value.extinguisherAssetTag||s.value.extinguisherCode),1)]),e("div",null,[t[12]||(t[12]=e("p",{class:"text-xs text-gray-500 uppercase tracking-wide"}," Location ",-1)),e("p",ee,n(s.value.locationName),1)]),e("div",null,[t[13]||(t[13]=e("p",{class:"text-xs text-gray-500 uppercase tracking-wide"}," Date ",-1)),e("p",te,n(f(s.value.inspectionDate)),1)]),e("div",null,[t[14]||(t[14]=e("p",{class:"text-xs text-gray-500 uppercase tracking-wide"}," Inspector ",-1)),e("p",se,n(s.value.inspectorName),1)])]),s.value.latitude&&s.value.longitude?(o(),l("div",le,[t[16]||(t[16]=e("p",{class:"text-xs text-gray-500 uppercase tracking-wide mb-1"}," GPS Coordinates ",-1)),e("div",oe,[t[15]||(t[15]=e("svg",{class:"h-4 w-4 text-gray-400 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),e("span",null,n(s.value.latitude.toFixed(6))+", "+n(s.value.longitude.toFixed(6)),1),e("span",{class:d([s.value.locationVerified?"text-green-600":"text-gray-400","ml-2 text-xs"])},n(s.value.locationVerified?"✓ Verified":"○ Unverified"),3)])])):r("",!0),s.value.inspectionHash?(o(),l("div",ie,[e("div",ne,[e("div",ae,[(o(),l("svg",{class:d([s.value.hashVerified?"text-green-600":"text-gray-400","h-5 w-5 mr-2"]),fill:"currentColor",viewBox:"0 0 20 20"},[...t[17]||(t[17]=[e("path",{"fill-rule":"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])],2)),e("span",re,n(s.value.hashVerified?"Tamper-Proof Verified":"Verification Pending"),1)]),x.value?(o(),l("span",de,"Verifying...")):(o(),l("button",{key:0,class:"text-sm text-primary-600 hover:text-primary-700 font-medium",onClick:C}," Verify Now "))])])):r("",!0)]),s.value.checklistResponses&&s.value.checklistResponses.length>0?(o(),l("div",ce,[t[18]||(t[18]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Checklist Responses ",-1)),e("div",ue,[(o(!0),l(p,null,v(s.value.checklistResponses,a=>(o(),l("div",{key:a.responseId,class:"flex items-start justify-between py-3 border-b border-gray-100 last:border-0"},[e("div",ge,[e("p",xe,n(a.itemText),1),a.comment?(o(),l("p",pe,n(a.comment),1)):r("",!0)]),e("span",{class:d([_(a.response),"ml-3 inline-flex items-center px-2 py-1 rounded text-xs font-medium"])},n(a.response),3)]))),128))])])):r("",!0),s.value.photos&&s.value.photos.length>0?(o(),l("div",ve,[e("h3",me," Photos ("+n(s.value.photos.length)+") ",1),e("div",ye,[(o(!0),l(p,null,v(s.value.photos,a=>(o(),l("div",{key:a.photoId,class:"aspect-square rounded-lg overflow-hidden cursor-pointer hover:opacity-90 transition-opacity",onClick:De=>I(a)},[e("img",{src:a.thumbnailUrl,alt:a.photoType,class:"w-full h-full object-cover"},null,8,he)],8,fe))),128))])])):r("",!0),s.value.deficiencies&&s.value.deficiencies.length>0?(o(),l("div",be,[e("h3",we," Deficiencies ("+n(s.value.deficiencies.length)+") ",1),e("div",_e,[(o(!0),l(p,null,v(s.value.deficiencies,a=>(o(),l("div",{key:a.deficiencyId,class:"p-4 border border-gray-200 rounded-lg"},[e("div",ke,[e("p",Ce,n(a.deficiencyType),1),e("span",{class:d([k(a.severity),"inline-flex items-center px-2 py-1 rounded text-xs font-medium"])},n(a.severity),3)]),e("p",Ie,n(a.description),1),e("div",ze,[e("span",null,"Status: "+n(a.status),1)])]))),128))])])):r("",!0),s.value.notes?(o(),l("div",Be,[t[19]||(t[19]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Final Notes ",-1)),e("p",Me,n(s.value.notes),1)])):r("",!0),s.value.inspectorSignature?(o(),l("div",Pe,[t[20]||(t[20]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Inspector Signature ",-1)),e("p",Ve,n(s.value.inspectorSignature),1),e("p",Fe," Signed on "+n(f(s.value.modifiedDate)),1)])):r("",!0)])):g.value?(o(),l("div",Re,[...t[21]||(t[21]=[e("svg",{class:"animate-spin h-12 w-12 text-primary-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):r("",!0),c.value?(o(),l("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-end justify-center sm:items-center",onClick:t[3]||(t[3]=a=>c.value=!1)},[e("div",{class:"bg-white rounded-t-lg sm:rounded-lg p-4 w-full max-w-sm space-y-2 animate-slide-up",onClick:t[2]||(t[2]=N(()=>{},["stop"]))},[e("button",{class:"w-full px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",onClick:z}," Export PDF "),e("button",{class:"w-full px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",onClick:B}," Share "),e("button",{class:"w-full px-4 py-3 text-center text-gray-500 hover:bg-gray-50 rounded-lg transition-colors border-t",onClick:t[1]||(t[1]=a=>c.value=!1)}," Cancel ")])])):r("",!0)])}}});export{Te as default};
