import{r as d,c as G,o as W,y,x as H,f as e,b as f,e as g,E as Q,A as V,s as A,z as X,t as w,F as ee,w as q,q as n,v as F,I as c,J as _,K as Y,C as E,g as r}from"./vendor-8rVgzruD.js";import{a as te}from"./index-DcSKaWik.js";import{u as se}from"./XCircleIcon-CdsB511z.js";import{e as ae,f as re,A as oe}from"./AppLayout-DVMZMm7i.js";import{r as le}from"./UserIcon-Br6Ln9-1.js";import{r as ne,a as I,b as T}from"./LockClosedIcon-DHD7G0pt.js";import"./BuildingOfficeIcon-BZlVraTP.js";import"./XMarkIcon-C76yCGqv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InformationCircleIcon-B2m1JJFM.js";import"./CheckCircleIcon-Bq29seAH.js";const ie={class:"mb-6"},de={class:"border-b border-gray-200"},ue={class:"-mb-px flex space-x-8"},fe=["onClick"],me={key:0,class:"space-y-6"},pe={class:"card"},ce={class:"card-body"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ye={class:"flex items-center justify-between pt-4 border-t border-gray-200"},be={class:"text-sm text-gray-500"},ge=["disabled"],we={key:0},xe={key:1,class:"flex items-center"},he={key:1,class:"space-y-6"},Pe={class:"card"},ke={class:"card-body"},Ne={class:"relative"},Se=["type"],De={class:"relative"},Ce=["type"],Fe={key:0,class:"mt-2"},Ye={class:"flex items-center space-x-2"},Me={class:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden"},Ue={class:"relative"},Ve=["type"],Ae={key:0,class:"text-sm text-red-600 mt-1"},_e={class:"flex items-center justify-end pt-4 border-t border-gray-200"},Ee=["disabled"],Ie={key:0},Te={key:1,class:"flex items-center"},Re={class:"card"},$e={class:"card-body"},je={class:"flex items-start justify-between"},qe={class:"flex-1"},ze={class:"font-medium text-gray-900 mb-1"},Je=["disabled"],Le={key:2,class:"space-y-6"},Oe={class:"card"},Be={class:"card-body space-y-4"},Ke={class:"flex items-start justify-between py-3"},Ze={class:"relative inline-flex items-center cursor-pointer"},Ge={class:"flex items-start justify-between py-3 border-t border-gray-200"},We={class:"relative inline-flex items-center cursor-pointer"},He={class:"flex items-start justify-between py-3 border-t border-gray-200"},Qe={class:"relative inline-flex items-center cursor-pointer"},Xe={class:"flex items-start justify-between py-3 border-t border-gray-200"},et={class:"relative inline-flex items-center cursor-pointer"},tt={key:3,class:"space-y-6"},st={class:"card"},at={class:"card-body space-y-4"},rt={class:"card"},ot={class:"card-body space-y-4"},lt={class:"flex items-start justify-between"},nt=["disabled"],ht={__name:"SettingsView",setup(it){const o=te(),i=se(),b=d("profile"),x=d(!1),h=d(!1),M=d(!1),P=d(!1),k=d(!1),N=d(!1),S=d(!1),m=d("weak"),z=[{id:"profile",name:"Profile",icon:le},{id:"security",name:"Security",icon:ne},{id:"notifications",name:"Notifications",icon:ae},{id:"preferences",name:"Preferences",icon:re}],u=d({firstName:"",lastName:"",email:"",phoneNumber:""}),l=d({currentPassword:"",newPassword:"",confirmPassword:""}),p=d({inspectionReminders:!0,failedInspectionAlerts:!0,weeklyReports:!1,systemUpdates:!0}),v=d({dateFormat:"MM/DD/YYYY",timeFormat:"12",itemsPerPage:25}),R=G(()=>l.value.newPassword===l.value.confirmPassword);W(()=>{o.user&&(u.value={firstName:o.user.firstName||"",lastName:o.user.lastName||"",email:o.user.email||"",phoneNumber:o.user.phoneNumber||""});const a=localStorage.getItem("notificationSettings");a&&(p.value=JSON.parse(a));const t=localStorage.getItem("preferences");t&&(v.value=JSON.parse(t))});const J=async()=>{x.value=!0;try{await new Promise(a=>setTimeout(a,1e3)),o.user&&(o.user.firstName=u.value.firstName,o.user.lastName=u.value.lastName,o.user.phoneNumber=u.value.phoneNumber),i.success("Profile updated successfully")}catch(a){console.error("Failed to save profile:",a),i.error("Failed to save profile")}finally{x.value=!1}},L=()=>{const a=l.value.newPassword;if(!a){m.value="weak";return}let t=0;a.length>=8&&t++,a.length>=12&&t++,/[a-z]/.test(a)&&t++,/[A-Z]/.test(a)&&t++,/[0-9]/.test(a)&&t++,/[^a-zA-Z0-9]/.test(a)&&t++,t<=2?m.value="weak":t<=4?m.value="medium":m.value="strong"},O=async()=>{if(!R.value){i.error("Passwords do not match");return}if(m.value==="weak"){i.error("Please choose a stronger password");return}h.value=!0;try{await new Promise(a=>setTimeout(a,1e3)),i.success("Password changed successfully"),l.value={currentPassword:"",newPassword:"",confirmPassword:""}}catch(a){console.error("Failed to change password:",a),i.error("Failed to change password")}finally{h.value=!1}},B=async()=>{var a;M.value=!0;try{await new Promise(C=>setTimeout(C,1e3));const t=!((a=o.user)!=null&&a.mfaEnabled);o.user&&(o.user.mfaEnabled=t),i.success(`Two-factor authentication ${t?"enabled":"disabled"}`)}catch(t){console.error("Failed to toggle 2FA:",t),i.error("Failed to update two-factor authentication")}finally{M.value=!1}},D=()=>{localStorage.setItem("notificationSettings",JSON.stringify(p.value)),i.success("Notification settings saved")},U=()=>{localStorage.setItem("preferences",JSON.stringify(v.value)),i.success("Preferences saved")},K=async()=>{P.value=!0;try{i.info("Preparing data export..."),await new Promise(a=>setTimeout(a,2e3)),i.success("Data exported successfully")}catch(a){console.error("Failed to export data:",a),i.error("Failed to export data")}finally{P.value=!1}},Z=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Never";return(a,t)=>(r(),y(oe,null,{default:H(()=>{var C,$,j;return[e("div",null,[t[50]||(t[50]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-display font-semibold text-gray-900 mb-2"}," Settings "),e("p",{class:"text-gray-600"}," Manage your account and application preferences ")],-1)),e("div",ie,[e("div",de,[e("nav",ue,[(r(),f(ee,null,Q(z,s=>e("button",{key:s.id,class:V(["py-4 px-1 border-b-2 font-medium text-sm transition-colors",[b.value===s.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"]]),onClick:dt=>b.value=s.id},[(r(),y(X(s.icon),{class:"h-5 w-5 inline-block mr-2"})),A(" "+w(s.name),1)],10,fe)),64))])])]),b.value==="profile"?(r(),f("div",me,[e("div",pe,[t[23]||(t[23]=e("div",{class:"card-header"},[e("h2",{class:"text-lg font-semibold text-gray-900"}," Profile Information ")],-1)),e("div",ce,[e("form",{class:"space-y-5",onSubmit:q(J,["prevent"])},[e("div",ve,[e("div",null,[t[17]||(t[17]=e("label",{for:"firstName",class:"form-label"},"First Name *",-1)),n(e("input",{id:"firstName","onUpdate:modelValue":t[0]||(t[0]=s=>u.value.firstName=s),type:"text",required:"",class:"form-input"},null,512),[[F,u.value.firstName]])]),e("div",null,[t[18]||(t[18]=e("label",{for:"lastName",class:"form-label"},"Last Name *",-1)),n(e("input",{id:"lastName","onUpdate:modelValue":t[1]||(t[1]=s=>u.value.lastName=s),type:"text",required:"",class:"form-input"},null,512),[[F,u.value.lastName]])])]),e("div",null,[t[19]||(t[19]=e("label",{for:"email",class:"form-label"},"Email Address",-1)),n(e("input",{id:"email","onUpdate:modelValue":t[2]||(t[2]=s=>u.value.email=s),type:"email",disabled:"",class:"form-input bg-gray-50"},null,512),[[F,u.value.email]]),t[20]||(t[20]=e("p",{class:"form-helper"}," Email address cannot be changed. Contact support if you need to update it. ",-1))]),e("div",null,[t[21]||(t[21]=e("label",{for:"phoneNumber",class:"form-label"},"Phone Number",-1)),n(e("input",{id:"phoneNumber","onUpdate:modelValue":t[3]||(t[3]=s=>u.value.phoneNumber=s),type:"tel",class:"form-input",placeholder:"+1 (555) 123-4567"},null,512),[[F,u.value.phoneNumber]])]),e("div",ye,[e("div",be," Last updated: "+w(Z((C=c(o).user)==null?void 0:C.modifiedDate)),1),e("button",{type:"submit",disabled:x.value,class:"btn-primary"},[x.value?(r(),f("span",xe,[...t[22]||(t[22]=[e("div",{class:"spinner mr-2"},null,-1),A(" Saving... ",-1)])])):(r(),f("span",we,"Save Changes"))],8,ge)])],32)])])])):g("",!0),b.value==="security"?(r(),f("div",he,[e("div",Pe,[t[29]||(t[29]=e("div",{class:"card-header"},[e("h2",{class:"text-lg font-semibold text-gray-900"}," Change Password ")],-1)),e("div",ke,[e("form",{class:"space-y-5",onSubmit:q(O,["prevent"])},[e("div",null,[t[24]||(t[24]=e("label",{for:"currentPassword",class:"form-label"},"Current Password *",-1)),e("div",Ne,[n(e("input",{id:"currentPassword","onUpdate:modelValue":t[4]||(t[4]=s=>l.value.currentPassword=s),type:k.value?"text":"password",required:"",class:"form-input pr-10"},null,8,Se),[[_,l.value.currentPassword]]),e("button",{type:"button",class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",onClick:t[5]||(t[5]=s=>k.value=!k.value)},[k.value?(r(),y(c(T),{key:1,class:"h-5 w-5"})):(r(),y(c(I),{key:0,class:"h-5 w-5"}))])])]),e("div",null,[t[26]||(t[26]=e("label",{for:"newPassword",class:"form-label"},"New Password *",-1)),e("div",De,[n(e("input",{id:"newPassword","onUpdate:modelValue":t[6]||(t[6]=s=>l.value.newPassword=s),type:N.value?"text":"password",required:"",class:"form-input pr-10",onInput:L},null,40,Ce),[[_,l.value.newPassword]]),e("button",{type:"button",class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",onClick:t[7]||(t[7]=s=>N.value=!N.value)},[N.value?(r(),y(c(T),{key:1,class:"h-5 w-5"})):(r(),y(c(I),{key:0,class:"h-5 w-5"}))])]),l.value.newPassword?(r(),f("div",Fe,[e("div",Ye,[e("div",Me,[e("div",{class:V(["h-full transition-all duration-300",[m.value==="weak"?"bg-red-500 w-1/3":m.value==="medium"?"bg-amber-500 w-2/3":"bg-green-500 w-full"]])},null,2)]),e("span",{class:V(["text-xs font-medium capitalize",[m.value==="weak"?"text-red-600":m.value==="medium"?"text-amber-600":"text-green-600"]])},w(m.value),3)]),t[25]||(t[25]=e("p",{class:"text-xs text-gray-500 mt-1"}," Use at least 8 characters with a mix of letters, numbers, and symbols ",-1))])):g("",!0)]),e("div",null,[t[27]||(t[27]=e("label",{for:"confirmPassword",class:"form-label"},"Confirm New Password *",-1)),e("div",Ue,[n(e("input",{id:"confirmPassword","onUpdate:modelValue":t[8]||(t[8]=s=>l.value.confirmPassword=s),type:S.value?"text":"password",required:"",class:"form-input pr-10"},null,8,Ve),[[_,l.value.confirmPassword]]),e("button",{type:"button",class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",onClick:t[9]||(t[9]=s=>S.value=!S.value)},[S.value?(r(),y(c(T),{key:1,class:"h-5 w-5"})):(r(),y(c(I),{key:0,class:"h-5 w-5"}))])]),l.value.confirmPassword&&l.value.newPassword!==l.value.confirmPassword?(r(),f("p",Ae," Passwords do not match ")):g("",!0)]),e("div",_e,[e("button",{type:"submit",disabled:h.value||!R.value,class:"btn-primary"},[h.value?(r(),f("span",Te,[...t[28]||(t[28]=[e("div",{class:"spinner mr-2"},null,-1),A(" Changing... ",-1)])])):(r(),f("span",Ie,"Change Password"))],8,Ee)])],32)])]),e("div",Re,[t[31]||(t[31]=e("div",{class:"card-header"},[e("h2",{class:"text-lg font-semibold text-gray-900"}," Two-Factor Authentication ")],-1)),e("div",$e,[e("div",je,[e("div",qe,[e("h3",ze,w(($=c(o).user)!=null&&$.mfaEnabled?"Enabled":"Disabled"),1),t[30]||(t[30]=e("p",{class:"text-sm text-gray-600"}," Add an extra layer of security to your account by requiring a verification code when signing in. ",-1))]),e("button",{class:"ml-4 btn-outline",disabled:M.value,onClick:B},w((j=c(o).user)!=null&&j.mfaEnabled?"Disable":"Enable"),9,Je)])])])])):g("",!0),b.value==="notifications"?(r(),f("div",Le,[e("div",Oe,[t[40]||(t[40]=e("div",{class:"card-header"},[e("h2",{class:"text-lg font-semibold text-gray-900"}," Email Notifications ")],-1)),e("div",Be,[e("div",Ke,[t[33]||(t[33]=e("div",{class:"flex-1"},[e("h3",{class:"font-medium text-gray-900 mb-1"}," Inspection Reminders "),e("p",{class:"text-sm text-gray-600"}," Receive email reminders when inspections are due ")],-1)),e("label",Ze,[n(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>p.value.inspectionReminders=s),type:"checkbox",class:"sr-only peer",onChange:D},null,544),[[Y,p.value.inspectionReminders]]),t[32]||(t[32]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])]),e("div",Ge,[t[35]||(t[35]=e("div",{class:"flex-1"},[e("h3",{class:"font-medium text-gray-900 mb-1"}," Failed Inspection Alerts "),e("p",{class:"text-sm text-gray-600"}," Get notified when an extinguisher fails inspection ")],-1)),e("label",We,[n(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>p.value.failedInspectionAlerts=s),type:"checkbox",class:"sr-only peer",onChange:D},null,544),[[Y,p.value.failedInspectionAlerts]]),t[34]||(t[34]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])]),e("div",He,[t[37]||(t[37]=e("div",{class:"flex-1"},[e("h3",{class:"font-medium text-gray-900 mb-1"}," Weekly Reports "),e("p",{class:"text-sm text-gray-600"}," Receive a weekly summary of inspection activity ")],-1)),e("label",Qe,[n(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>p.value.weeklyReports=s),type:"checkbox",class:"sr-only peer",onChange:D},null,544),[[Y,p.value.weeklyReports]]),t[36]||(t[36]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])]),e("div",Xe,[t[39]||(t[39]=e("div",{class:"flex-1"},[e("h3",{class:"font-medium text-gray-900 mb-1"}," System Updates "),e("p",{class:"text-sm text-gray-600"}," Stay informed about new features and updates ")],-1)),e("label",et,[n(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>p.value.systemUpdates=s),type:"checkbox",class:"sr-only peer",onChange:D},null,544),[[Y,p.value.systemUpdates]]),t[38]||(t[38]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])])])])])):g("",!0),b.value==="preferences"?(r(),f("div",tt,[e("div",st,[t[47]||(t[47]=e("div",{class:"card-header"},[e("h2",{class:"text-lg font-semibold text-gray-900"}," Display Preferences ")],-1)),e("div",at,[e("div",null,[t[42]||(t[42]=e("label",{for:"dateFormat",class:"form-label"},"Date Format",-1)),n(e("select",{id:"dateFormat","onUpdate:modelValue":t[14]||(t[14]=s=>v.value.dateFormat=s),class:"form-input",onChange:U},[...t[41]||(t[41]=[e("option",{value:"MM/DD/YYYY"}," MM/DD/YYYY (US) ",-1),e("option",{value:"DD/MM/YYYY"}," DD/MM/YYYY (UK) ",-1),e("option",{value:"YYYY-MM-DD"}," YYYY-MM-DD (ISO) ",-1)])],544),[[E,v.value.dateFormat]])]),e("div",null,[t[44]||(t[44]=e("label",{for:"timeFormat",class:"form-label"},"Time Format",-1)),n(e("select",{id:"timeFormat","onUpdate:modelValue":t[15]||(t[15]=s=>v.value.timeFormat=s),class:"form-input",onChange:U},[...t[43]||(t[43]=[e("option",{value:"12"}," 12-hour (AM/PM) ",-1),e("option",{value:"24"}," 24-hour ",-1)])],544),[[E,v.value.timeFormat]])]),e("div",null,[t[46]||(t[46]=e("label",{for:"itemsPerPage",class:"form-label"},"Items Per Page",-1)),n(e("select",{id:"itemsPerPage","onUpdate:modelValue":t[16]||(t[16]=s=>v.value.itemsPerPage=s),class:"form-input",onChange:U},[...t[45]||(t[45]=[e("option",{value:10}," 10 ",-1),e("option",{value:25}," 25 ",-1),e("option",{value:50}," 50 ",-1),e("option",{value:100}," 100 ",-1)])],544),[[E,v.value.itemsPerPage,void 0,{number:!0}]])])])]),e("div",rt,[t[49]||(t[49]=e("div",{class:"card-header"},[e("h2",{class:"text-lg font-semibold text-gray-900"}," Data Management ")],-1)),e("div",ot,[e("div",lt,[t[48]||(t[48]=e("div",{class:"flex-1"},[e("h3",{class:"font-medium text-gray-900 mb-1"}," Export All Data "),e("p",{class:"text-sm text-gray-600"}," Download a complete backup of your data in CSV format ")],-1)),e("button",{class:"ml-4 btn-outline",disabled:P.value,onClick:K},w(P.value?"Exporting...":"Export"),9,nt)])])])])):g("",!0)])]}),_:1}))}};export{ht as default};
