import{b as n,f as e,g as i,r as f,o as q,y as K,x as w,h as c,e as C,s as T,I as r,t as d,F as A,E as U,A as Y,T as E,w as I,q as p,v as g,C as M,K as O}from"./vendor-8rVgzruD.js";import{u as W}from"./extinguisherTypes-8sTbIimK.js";import{u as H,r as z}from"./XCircleIcon-CdsB511z.js";import{A as G}from"./AppLayout-DVMZMm7i.js";import{r as V}from"./PlusIcon-D7fN4Pmp.js";import{r as $}from"./XMarkIcon-C76yCGqv.js";import{r as J,a as P}from"./TrashIcon-DaLIbI_u.js";import"./index-DcSKaWik.js";import"./BuildingOfficeIcon-BZlVraTP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InformationCircleIcon-B2m1JJFM.js";import"./CheckCircleIcon-Bq29seAH.js";function Q(D,o){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"})])}const X={class:"flex justify-between items-center mb-8"},Z={key:0,class:"alert-danger mb-6"},ee={class:"flex-1"},te={class:"text-sm font-medium"},se={key:1,class:"card"},le={key:2,class:"card"},ae={class:"table-container"},ie={class:"table"},re={class:"font-mono text-sm"},ne={class:"font-medium"},oe={class:"badge-info"},de={class:"text-sm text-gray-600"},ue={class:"flex flex-wrap gap-1"},ce={key:0,class:"text-gray-400 text-sm"},pe={class:"text-sm text-gray-600"},ve={class:"text-right"},ye={class:"flex justify-end space-x-2"},me=["onClick"],fe=["onClick"],ge={key:3,class:"card"},be={class:"p-12 text-center"},xe={class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary-100 mb-4"},he={class:"modal-container max-w-2xl"},Ce={class:"modal-content max-h-[90vh] overflow-y-auto"},Te={class:"flex items-center justify-between mb-6 sticky top-0 bg-white pb-4 border-b"},ke={class:"text-2xl font-display font-semibold text-gray-900"},we={class:"grid grid-cols-2 gap-4"},Ae=["disabled"],Ue={class:"grid grid-cols-2 gap-4"},Ye={class:"grid grid-cols-5 gap-3"},Le=["onClick"],_e=["checked","onChange"],Ne={class:"ml-2 block text-sm font-medium text-gray-700 cursor-pointer"},Fe={class:"grid grid-cols-2 gap-4"},Ee={key:0,class:"flex items-center p-4 bg-gray-50 rounded-lg"},Ie={class:"flex space-x-3 pt-4 sticky bottom-0 bg-white border-t"},Me=["disabled"],Ve={key:0},$e={key:1,class:"flex items-center justify-center"},De=["disabled"],Pe={__name:"ExtinguisherTypesView",setup(D){const o=W(),y=H(),x=f(!1),u=f(!1),k=f(null),b=f(!1),v=f([]),S=[{value:"A",label:"Class A"},{value:"B",label:"Class B"},{value:"C",label:"Class C"},{value:"D",label:"Class D"},{value:"K",label:"Class K"}],l=f({typeCode:"",typeName:"",description:"",agentType:"",capacity:null,capacityUnit:"",fireClassRating:"",serviceLifeYears:null,hydroTestIntervalYears:null,isActive:!0});q(async()=>{try{await o.fetchTypes()}catch(a){console.error("Failed to load extinguisher types:",a),y.error("Failed to load extinguisher types")}});const L=a=>a?a.split(",").map(t=>t.trim()).filter(Boolean):[],_=a=>{const t=v.value.indexOf(a);t>-1?v.value.splice(t,1):v.value.push(a),l.value.fireClassRating=v.value.sort().join(",")},N=()=>{F(),u.value=!1,x.value=!0},B=a=>{k.value=a.extinguisherTypeId,l.value={typeCode:a.typeCode,typeName:a.typeName,description:a.description||"",agentType:a.agentType||"",capacity:a.capacity,capacityUnit:a.capacityUnit||"",fireClassRating:a.fireClassRating||"",serviceLifeYears:a.serviceLifeYears,hydroTestIntervalYears:a.hydroTestIntervalYears,isActive:a.isActive},v.value=L(a.fireClassRating),u.value=!0,x.value=!0},h=()=>{x.value=!1,setTimeout(()=>{F()},200)},F=()=>{u.value=!1,k.value=null,v.value=[],l.value={typeCode:"",typeName:"",description:"",agentType:"",capacity:null,capacityUnit:"",fireClassRating:"",serviceLifeYears:null,hydroTestIntervalYears:null,isActive:!0}},R=async()=>{var a,t;b.value=!0;try{const s={...l.value,description:l.value.description||null,agentType:l.value.agentType||null,capacity:l.value.capacity||null,capacityUnit:l.value.capacityUnit||null,fireClassRating:l.value.fireClassRating||null,serviceLifeYears:l.value.serviceLifeYears||null,hydroTestIntervalYears:l.value.hydroTestIntervalYears||null};u.value?(await o.updateType(k.value,s),y.success("Extinguisher type updated successfully")):(await o.createType(s),y.success("Extinguisher type created successfully")),h()}catch(s){console.error("Form submission error:",s),y.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to save extinguisher type")}finally{b.value=!1}},j=async a=>{if(confirm(`Are you sure you want to delete "${a.typeName}"?

This action cannot be undone.`))try{await o.deleteType(a.extinguisherTypeId),y.success("Extinguisher type deleted successfully")}catch(t){console.error("Failed to delete extinguisher type:",t),y.error("Failed to delete extinguisher type")}};return(a,t)=>(i(),K(G,null,{default:w(()=>[e("div",null,[e("div",X,[t[11]||(t[11]=e("div",null,[e("h1",{class:"text-3xl font-display font-semibold text-gray-900 mb-2"}," Extinguisher Types "),e("p",{class:"text-gray-600"}," Manage fire extinguisher type specifications and configurations ")],-1)),e("button",{class:"btn-primary inline-flex items-center",onClick:N},[c(r(V),{class:"h-5 w-5 mr-2"}),t[10]||(t[10]=T(" Add Type ",-1))])]),r(o).error?(i(),n("div",Z,[c(r(z),{class:"h-5 w-5"}),e("div",ee,[e("p",te,d(r(o).error),1)]),e("button",{type:"button",class:"text-red-400 hover:text-red-600",onClick:t[0]||(t[0]=s=>r(o).clearError())},[c(r($),{class:"h-5 w-5"})])])):C("",!0),r(o).loading&&r(o).types.length===0?(i(),n("div",se,[...t[12]||(t[12]=[e("div",{class:"p-12 text-center"},[e("div",{class:"spinner-lg mx-auto mb-4"}),e("p",{class:"text-gray-600"}," Loading extinguisher types... ")],-1)])])):r(o).types.length>0?(i(),n("div",le,[e("div",ae,[e("table",ie,[t[14]||(t[14]=e("thead",null,[e("tr",null,[e("th",null,"Type Code"),e("th",null,"Type Name"),e("th",null,"Agent Type"),e("th",null,"Capacity"),e("th",null,"Fire Class"),e("th",null,"Service Life"),e("th",null,"Status"),e("th",{class:"text-right"}," Actions ")])],-1)),e("tbody",null,[(i(!0),n(A,null,U(r(o).types,s=>(i(),n("tr",{key:s.extinguisherTypeId},[e("td",re,d(s.typeCode),1),e("td",ne,d(s.typeName),1),e("td",null,[e("span",oe,d(s.agentType||"N/A"),1)]),e("td",de,d(s.capacity?`${s.capacity} ${s.capacityUnit||"lbs"}`:"N/A"),1),e("td",null,[e("div",ue,[(i(!0),n(A,null,U(L(s.fireClassRating),m=>(i(),n("span",{key:m,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800"}," Class "+d(m),1))),128)),s.fireClassRating?C("",!0):(i(),n("span",ce,"N/A"))])]),e("td",pe,d(s.serviceLifeYears?`${s.serviceLifeYears} years`:"N/A"),1),e("td",null,[e("span",{class:Y(s.isActive?"badge-success":"badge-secondary")},d(s.isActive?"Active":"Inactive"),3)]),e("td",ve,[e("div",ye,[e("button",{class:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-gray-700 bg-gray-50 rounded hover:bg-gray-100 transition-colors",onClick:m=>B(s)},[c(r(J),{class:"h-4 w-4 mr-1"}),t[13]||(t[13]=T(" Edit ",-1))],8,me),e("button",{class:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-red-600 bg-red-50 rounded hover:bg-red-100 transition-colors",onClick:m=>j(s)},[c(r(P),{class:"h-4 w-4"})],8,fe)])])]))),128))])])])])):(i(),n("div",ge,[e("div",be,[e("div",xe,[c(r(Q),{class:"h-8 w-8 text-primary-600"})]),t[16]||(t[16]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"}," No extinguisher types yet ",-1)),t[17]||(t[17]=e("p",{class:"text-gray-600 mb-6"}," Create type specifications before adding extinguishers ",-1)),e("button",{class:"btn-primary inline-flex items-center",onClick:N},[c(r(V),{class:"h-5 w-5 mr-2"}),t[15]||(t[15]=T(" Add First Type ",-1))])])]))]),c(E,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:w(()=>[x.value?(i(),n("div",{key:0,class:"modal-overlay",onClick:I(h,["self"])},[c(E,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:w(()=>[e("div",he,[e("div",Ce,[e("div",Te,[e("h2",ke,d(u.value?"Edit Extinguisher Type":"Add New Extinguisher Type"),1),e("button",{type:"button",class:"text-gray-400 hover:text-gray-600 transition-colors",onClick:h},[c(r($),{class:"h-6 w-6"})])]),e("form",{class:"space-y-5",onSubmit:I(R,["prevent"])},[e("div",we,[e("div",null,[t[18]||(t[18]=e("label",{for:"typeCode",class:"form-label"}," Type Code * ",-1)),p(e("input",{id:"typeCode","onUpdate:modelValue":t[1]||(t[1]=s=>l.value.typeCode=s),type:"text",required:"",disabled:u.value,class:Y(["form-input",{"bg-gray-50":u.value}]),placeholder:"ABC-10"},null,10,Ae),[[g,l.value.typeCode]]),t[19]||(t[19]=e("p",{class:"form-helper"}," Unique identifier (cannot be changed) ",-1))]),e("div",null,[t[20]||(t[20]=e("label",{for:"typeName",class:"form-label"}," Type Name * ",-1)),p(e("input",{id:"typeName","onUpdate:modelValue":t[2]||(t[2]=s=>l.value.typeName=s),type:"text",required:"",class:"form-input",placeholder:"10lb ABC Dry Chemical"},null,512),[[g,l.value.typeName]])])]),e("div",null,[t[22]||(t[22]=e("label",{for:"agentType",class:"form-label"}," Agent Type ",-1)),p(e("select",{id:"agentType","onUpdate:modelValue":t[3]||(t[3]=s=>l.value.agentType=s),class:"form-input"},[...t[21]||(t[21]=[e("option",{value:""}," Select agent type... ",-1),e("option",{value:"Dry Chemical"}," Dry Chemical ",-1),e("option",{value:"CO2"}," CO2 ",-1),e("option",{value:"Water"}," Water ",-1),e("option",{value:"Foam"}," Foam ",-1),e("option",{value:"Clean Agent"}," Clean Agent ",-1),e("option",{value:"Wet Chemical"}," Wet Chemical ",-1)])],512),[[M,l.value.agentType]])]),e("div",Ue,[e("div",null,[t[23]||(t[23]=e("label",{for:"capacity",class:"form-label"}," Capacity ",-1)),p(e("input",{id:"capacity","onUpdate:modelValue":t[4]||(t[4]=s=>l.value.capacity=s),type:"number",step:"0.1",class:"form-input",placeholder:"10"},null,512),[[g,l.value.capacity,void 0,{number:!0}]])]),e("div",null,[t[25]||(t[25]=e("label",{for:"capacityUnit",class:"form-label"}," Capacity Unit ",-1)),p(e("select",{id:"capacityUnit","onUpdate:modelValue":t[5]||(t[5]=s=>l.value.capacityUnit=s),class:"form-input"},[...t[24]||(t[24]=[e("option",{value:""}," Select unit... ",-1),e("option",{value:"lbs"}," lbs (pounds) ",-1),e("option",{value:"kg"}," kg (kilograms) ",-1),e("option",{value:"gal"}," gal (gallons) ",-1),e("option",{value:"L"}," L (liters) ",-1)])],512),[[M,l.value.capacityUnit]])])]),e("div",null,[t[26]||(t[26]=e("label",{class:"form-label"}," Fire Class Rating ",-1)),e("div",Ye,[(i(),n(A,null,U(S,s=>e("div",{key:s.value,class:Y(["flex items-center p-3 border-2 rounded-lg cursor-pointer transition-all",v.value.includes(s.value)?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"]),onClick:m=>_(s.value)},[e("input",{type:"checkbox",checked:v.value.includes(s.value),class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",onChange:m=>_(s.value)},null,40,_e),e("label",Ne,d(s.label),1)],10,Le)),64))]),t[27]||(t[27]=e("p",{class:"form-helper mt-2"}," A: Ordinary combustibles | B: Flammable liquids | C: Electrical | D: Combustible metals | K: Kitchen fires ",-1))]),e("div",Fe,[e("div",null,[t[28]||(t[28]=e("label",{for:"serviceLifeYears",class:"form-label"}," Service Life (Years) ",-1)),p(e("input",{id:"serviceLifeYears","onUpdate:modelValue":t[6]||(t[6]=s=>l.value.serviceLifeYears=s),type:"number",min:"1",class:"form-input",placeholder:"12"},null,512),[[g,l.value.serviceLifeYears,void 0,{number:!0}]]),t[29]||(t[29]=e("p",{class:"form-helper"}," Expected service life before replacement ",-1))]),e("div",null,[t[30]||(t[30]=e("label",{for:"hydroTestIntervalYears",class:"form-label"}," Hydro Test Interval (Years) ",-1)),p(e("input",{id:"hydroTestIntervalYears","onUpdate:modelValue":t[7]||(t[7]=s=>l.value.hydroTestIntervalYears=s),type:"number",min:"1",class:"form-input",placeholder:"5"},null,512),[[g,l.value.hydroTestIntervalYears,void 0,{number:!0}]]),t[31]||(t[31]=e("p",{class:"form-helper"}," Hydrostatic test frequency ",-1))])]),e("div",null,[t[32]||(t[32]=e("label",{for:"description",class:"form-label"}," Description ",-1)),p(e("textarea",{id:"description","onUpdate:modelValue":t[8]||(t[8]=s=>l.value.description=s),rows:"3",class:"form-input",placeholder:"Additional specifications and notes..."},null,512),[[g,l.value.description]])]),u.value?(i(),n("div",Ee,[p(e("input",{id:"isActive","onUpdate:modelValue":t[9]||(t[9]=s=>l.value.isActive=s),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[O,l.value.isActive]]),t[33]||(t[33]=e("label",{for:"isActive",class:"ml-2 block text-sm text-gray-700"}," Active type (available for new extinguishers) ",-1))])):C("",!0),e("div",Ie,[e("button",{type:"submit",disabled:b.value,class:"btn-primary flex-1"},[b.value?(i(),n("span",$e,[t[34]||(t[34]=e("div",{class:"spinner mr-2"},null,-1)),T(" "+d(u.value?"Updating...":"Creating..."),1)])):(i(),n("span",Ve,d(u.value?"Update Type":"Create Type"),1))],8,Me),e("button",{type:"button",disabled:b.value,class:"btn-outline",onClick:h}," Cancel ",8,De)])],32)])])]),_:1})])):C("",!0)]),_:1})]),_:1}))}};export{Pe as default};
