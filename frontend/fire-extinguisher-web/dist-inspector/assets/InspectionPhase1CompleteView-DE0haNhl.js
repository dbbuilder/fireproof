import{d as S,r as n,c as h,H as A,o as L,b as d,f as e,e as v,p as N,t as u,A as o,q as w,v as I,K as R,u as V,g as c}from"./vendor-8rVgzruD.js";import{u as D}from"./inspectionsPhase1-lLNUs6w2.js";import{a as $}from"./index-DcSKaWik.js";const q={class:"min-h-screen bg-gray-50"},E={key:0,class:"max-w-2xl mx-auto px-4 py-6 sm:px-6 lg:px-8"},T={class:"bg-white rounded-lg shadow-soft p-6 mb-6"},U={class:"space-y-3 border-t border-gray-200 pt-4"},H={class:"flex justify-between"},O={class:"text-sm font-medium text-gray-900"},K={class:"flex justify-between"},G={class:"text-sm font-medium text-gray-900"},J={class:"flex justify-between"},Q={class:"text-sm font-medium text-gray-900"},W={class:"flex justify-between"},X={class:"text-sm font-medium text-gray-900"},Y={class:"flex justify-between"},Z={class:"text-sm font-medium text-gray-900"},ee={class:"bg-white rounded-lg shadow-soft p-6 mb-6"},te={class:"grid grid-cols-1 gap-3"},se={key:0,class:"h-4 w-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},le={class:"flex-1 text-left"},oe={key:0,class:"h-4 w-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},ae={class:"flex-1 text-left"},re={key:0,class:"h-4 w-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},ne={class:"flex-1 text-left"},ie={class:"bg-white rounded-lg shadow-soft p-6 mb-6"},de={class:"bg-white rounded-lg shadow-soft p-6 mb-6"},ue={class:"space-y-4"},ce={class:"flex items-start"},me={key:0,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg"},pe={class:"flex"},ve={class:"text-sm text-red-800"},ge={class:"space-y-3 mb-6"},xe=["disabled"],ye=["disabled"],fe={key:1,class:"flex items-center justify-center min-h-screen"},Ce=S({__name:"InspectionPhase1CompleteView",setup(be){const B=A(),k=V(),C=D(),g=$(),r=n(null),s=n(""),x=n(""),m=n(""),y=n(!1),f=n(!1),p=n(!1),i=n(null),b=h(()=>B.params.id),j=h(()=>{var a,t;return((t=(a=r.value)==null?void 0:a.checklistResponses)==null?void 0:t.length)||0}),P=h(()=>s.value!==""&&m.value.trim()!==""&&y.value),z=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),_=()=>{k.push(`/inspections/${b.value}/checklist`)},F=async()=>{var a,t;if(!P.value){i.value="Please fill in all required fields";return}p.value=!0,i.value=null;try{const l=await C.completeInspection(b.value,{overallResult:s.value,notes:x.value||null,inspectorSignature:m.value});k.push({path:`/inspections/${l.inspectionId}`,query:{completed:"true"}})}catch(l){i.value=((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to complete inspection",console.error("Error completing inspection:",l)}finally{p.value=!1}},M=async()=>{var a,t;f.value=!0,i.value=null;try{r.value=await C.fetchInspectionById(b.value,!0),g.user&&(m.value=`${g.user.firstName} ${g.user.lastName}`)}catch(l){i.value=((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to load inspection"}finally{f.value=!1}};return L(()=>{M()}),(a,t)=>(c(),d("div",q,[e("div",{class:"bg-white border-b border-gray-200 sticky top-0 z-10"},[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[e("div",{class:"flex items-center justify-between h-16"},[e("button",{class:"flex items-center text-gray-600 hover:text-gray-900",onClick:_},[...t[6]||(t[6]=[e("svg",{class:"h-6 w-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),e("span",{class:"font-medium"},"Back",-1)])]),t[7]||(t[7]=e("h1",{class:"text-lg font-semibold text-gray-900"}," Complete Inspection ",-1)),t[8]||(t[8]=e("div",{class:"w-20"},null,-1))])])]),r.value?(c(),d("div",E,[e("div",T,[t[14]||(t[14]=N('<div class="flex items-center mb-4"><div class="flex-shrink-0 w-12 h-12 rounded-full bg-primary-100 flex items-center justify-center"><svg class="h-6 w-6 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="ml-4"><h2 class="text-xl font-semibold text-gray-900"> Inspection Summary </h2><p class="text-sm text-gray-600"> Review and finalize your inspection </p></div></div>',1)),e("div",U,[e("div",H,[t[9]||(t[9]=e("span",{class:"text-sm text-gray-600"},"Extinguisher",-1)),e("span",O,u(r.value.extinguisherAssetTag||r.value.extinguisherCode),1)]),e("div",K,[t[10]||(t[10]=e("span",{class:"text-sm text-gray-600"},"Location",-1)),e("span",G,u(r.value.locationName),1)]),e("div",J,[t[11]||(t[11]=e("span",{class:"text-sm text-gray-600"},"Type",-1)),e("span",Q,u(r.value.inspectionType),1)]),e("div",W,[t[12]||(t[12]=e("span",{class:"text-sm text-gray-600"},"Date",-1)),e("span",X,u(z(r.value.inspectionDate)),1)]),e("div",Y,[t[13]||(t[13]=e("span",{class:"text-sm text-gray-600"},"Checklist Items",-1)),e("span",Z,u(j.value)+" responses",1)])])]),e("div",ee,[t[18]||(t[18]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Overall Result * ",-1)),t[19]||(t[19]=e("p",{class:"text-sm text-gray-600 mb-4"}," Select the final inspection result ",-1)),e("div",te,[e("button",{class:o([s.value==="Pass"?"border-green-600 bg-green-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50","flex items-center p-4 border-2 rounded-lg transition-all"]),onClick:t[0]||(t[0]=l=>s.value="Pass")},[e("div",{class:o([s.value==="Pass"?"bg-green-600":"bg-gray-300","flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center mr-3"])},[s.value==="Pass"?(c(),d("svg",se,[...t[15]||(t[15]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):v("",!0)],2),e("div",le,[e("p",{class:o([s.value==="Pass"?"text-green-900":"text-gray-900","font-medium"])}," Pass ",2),e("p",{class:o([s.value==="Pass"?"text-green-700":"text-gray-600","text-sm"])}," All items meet requirements ",2)])],2),e("button",{class:o([s.value==="ConditionalPass"?"border-yellow-600 bg-yellow-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50","flex items-center p-4 border-2 rounded-lg transition-all"]),onClick:t[1]||(t[1]=l=>s.value="ConditionalPass")},[e("div",{class:o([s.value==="ConditionalPass"?"bg-yellow-600":"bg-gray-300","flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center mr-3"])},[s.value==="ConditionalPass"?(c(),d("svg",oe,[...t[16]||(t[16]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):v("",!0)],2),e("div",ae,[e("p",{class:o([s.value==="ConditionalPass"?"text-yellow-900":"text-gray-900","font-medium"])}," Conditional Pass ",2),e("p",{class:o([s.value==="ConditionalPass"?"text-yellow-700":"text-gray-600","text-sm"])}," Minor issues require attention ",2)])],2),e("button",{class:o([s.value==="Fail"?"border-red-600 bg-red-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50","flex items-center p-4 border-2 rounded-lg transition-all"]),onClick:t[2]||(t[2]=l=>s.value="Fail")},[e("div",{class:o([s.value==="Fail"?"bg-red-600":"bg-gray-300","flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center mr-3"])},[s.value==="Fail"?(c(),d("svg",re,[...t[17]||(t[17]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):v("",!0)],2),e("div",ne,[e("p",{class:o([s.value==="Fail"?"text-red-900":"text-gray-900","font-medium"])}," Fail ",2),e("p",{class:o([s.value==="Fail"?"text-red-700":"text-gray-600","text-sm"])}," Critical issues found, immediate action required ",2)])],2)])]),e("div",ie,[t[20]||(t[20]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Final Notes ",-1)),t[21]||(t[21]=e("p",{class:"text-sm text-gray-600 mb-4"}," Add any additional comments or observations ",-1)),w(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=l=>x.value=l),rows:"4",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Optional: Add any final notes, observations, or recommendations..."},null,512),[[I,x.value]])]),e("div",de,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Inspector Signature * ",-1)),t[25]||(t[25]=e("p",{class:"text-sm text-gray-600 mb-4"}," Confirm your identity to finalize this inspection ",-1)),e("div",ue,[e("div",null,[t[22]||(t[22]=e("label",{for:"signature-name",class:"block text-sm font-medium text-gray-700 mb-1"}," Full Name ",-1)),w(e("input",{id:"signature-name","onUpdate:modelValue":t[4]||(t[4]=l=>m.value=l),type:"text",placeholder:"Enter your full name",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[I,m.value]])]),e("div",ce,[w(e("input",{id:"confirm-accuracy","onUpdate:modelValue":t[5]||(t[5]=l=>y.value=l),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded mt-1"},null,512),[[R,y.value]]),t[23]||(t[23]=e("label",{for:"confirm-accuracy",class:"ml-2 text-sm text-gray-700"}," I confirm that this inspection was conducted accurately and in accordance with NFPA 10 standards ",-1))])])]),i.value?(c(),d("div",me,[e("div",pe,[t[26]||(t[26]=e("svg",{class:"h-5 w-5 text-red-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),e("p",ve,u(i.value),1)])])):v("",!0),e("div",ge,[e("button",{disabled:!P.value||p.value,class:"w-full px-6 py-4 bg-primary-600 text-white rounded-lg font-medium text-lg hover:bg-primary-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-md",onClick:F},u(p.value?"Completing Inspection...":"Complete Inspection"),9,xe),e("button",{disabled:p.value,class:"w-full px-6 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed",onClick:_}," Back to Checklist ",8,ye)])])):f.value?(c(),d("div",fe,[...t[27]||(t[27]=[e("svg",{class:"animate-spin h-12 w-12 text-primary-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):v("",!0)]))}});export{Ce as default};
