import{b as n,f as e,g as i,r as b,o as E,y as T,x as k,h as d,e as v,s as g,I as a,t as r,F as I,E as B,A,T as _,w as N,q as m,v as p,K as q}from"./vendor-8rVgzruD.js";import{u as D}from"./locations-e0sVBKke.js";import{u as O,r as z}from"./XCircleIcon-CdsB511z.js";import{r as U,A as G}from"./AppLayout-DVMZMm7i.js";import{r as M}from"./PlusIcon-D7fN4Pmp.js";import{r as S}from"./XMarkIcon-C76yCGqv.js";import{r as K,a as W}from"./TrashIcon-DaLIbI_u.js";import"./index-DcSKaWik.js";import"./BuildingOfficeIcon-BZlVraTP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InformationCircleIcon-B2m1JJFM.js";import"./CheckCircleIcon-Bq29seAH.js";function Y(V,u){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"})])}const H={class:"flex justify-between items-center mb-8"},J={key:0,class:"alert-danger mb-6"},Q={class:"flex-1"},R={class:"text-sm font-medium"},X={key:1,class:"card"},Z={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ee={class:"p-6"},te={class:"flex justify-between items-start mb-4"},se={class:"flex-1"},oe={class:"text-lg font-semibold text-gray-900 mb-1"},le={class:"text-sm text-gray-500"},ae={class:"space-y-1 text-sm text-gray-600 mb-4"},ie={key:0,class:"flex items-start"},ne={key:0},re={key:1},de={key:1,class:"flex items-center text-xs text-gray-500 mt-2"},ue={class:"flex space-x-2 pt-4 border-t border-gray-100"},ce=["onClick"],me=["onClick"],pe={key:3,class:"card"},ve={class:"p-12 text-center"},ye={class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary-100 mb-4"},fe={class:"modal-container"},be={class:"modal-content"},ge={class:"flex items-center justify-between mb-6"},xe={class:"text-2xl font-display font-semibold text-gray-900"},Le={class:"grid grid-cols-2 gap-4"},Ce=["disabled"],ke={class:"grid grid-cols-3 gap-4"},we={class:"grid grid-cols-2 gap-4"},he={key:0,class:"flex items-center"},Ae={class:"flex space-x-3 pt-4"},_e=["disabled"],Ne={key:0},Ue={key:1,class:"flex items-center justify-center"},Me=["disabled"],Oe={__name:"LocationsView",setup(V){const u=D(),y=O(),x=b(!1),c=b(!1),C=b(null),f=b(!1),o=b({locationCode:"",locationName:"",addressLine1:"",addressLine2:"",city:"",stateProvince:"",postalCode:"",country:"USA",latitude:null,longitude:null,isActive:!0});E(async()=>{try{await u.fetchLocations()}catch(l){console.error("Failed to load locations:",l),y.error("Failed to load locations")}});const w=()=>{h(),c.value=!1,x.value=!0},F=l=>{C.value=l.locationId,o.value={locationCode:l.locationCode,locationName:l.locationName,addressLine1:l.addressLine1||"",addressLine2:l.addressLine2||"",city:l.city||"",stateProvince:l.stateProvince||"",postalCode:l.postalCode||"",country:l.country||"USA",latitude:l.latitude,longitude:l.longitude,isActive:l.isActive},c.value=!0,x.value=!0},L=()=>{x.value=!1,setTimeout(()=>{h()},200)},h=()=>{c.value=!1,C.value=null,o.value={locationCode:"",locationName:"",addressLine1:"",addressLine2:"",city:"",stateProvince:"",postalCode:"",country:"USA",latitude:null,longitude:null,isActive:!0}},P=async()=>{var l,t;f.value=!0;try{c.value?(await u.updateLocation(C.value,o.value),y.success("Location updated successfully")):(await u.createLocation(o.value),y.success("Location created successfully")),L()}catch(s){console.error("Form submission error:",s),y.error(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to save location")}finally{f.value=!1}},$=async l=>{if(confirm(`Are you sure you want to delete "${l.locationName}"?

This action cannot be undone.`))try{await u.deleteLocation(l.locationId),y.success("Location deleted successfully")}catch(t){console.error("Failed to delete location:",t),y.error("Failed to delete location")}};return(l,t)=>(i(),T(G,null,{default:k(()=>[e("div",null,[e("div",H,[t[12]||(t[12]=e("div",null,[e("h1",{class:"text-3xl font-display font-semibold text-gray-900 mb-2"}," Locations "),e("p",{class:"text-gray-600"}," Manage facility locations for fire extinguisher inspections ")],-1)),e("button",{class:"btn-primary inline-flex items-center",onClick:w},[d(a(M),{class:"h-5 w-5 mr-2"}),t[11]||(t[11]=g(" Add Location ",-1))])]),a(u).error?(i(),n("div",J,[d(a(z),{class:"h-5 w-5"}),e("div",Q,[e("p",R,r(a(u).error),1)]),e("button",{type:"button",class:"text-red-400 hover:text-red-600",onClick:t[0]||(t[0]=s=>a(u).clearError())},[d(a(S),{class:"h-5 w-5"})])])):v("",!0),a(u).loading?(i(),n("div",X,[...t[13]||(t[13]=[e("div",{class:"p-12 text-center"},[e("div",{class:"spinner-lg mx-auto mb-4"}),e("p",{class:"text-gray-600"}," Loading locations... ")],-1)])])):a(u).locations.length>0?(i(),n("div",Z,[(i(!0),n(I,null,B(a(u).locations,s=>(i(),n("div",{key:s.locationId,class:"card hover:shadow-lg transition-all duration-200 group"},[e("div",ee,[e("div",te,[e("div",se,[e("h3",oe,r(s.locationName),1),e("p",le,r(s.locationCode),1)]),e("span",{class:A(["badge-success",!s.isActive&&"badge-secondary"])},r(s.isActive?"Active":"Inactive"),3)]),e("div",ae,[s.addressLine1?(i(),n("div",ie,[d(a(U),{class:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0 text-gray-400"}),e("div",null,[e("p",null,r(s.addressLine1),1),s.addressLine2?(i(),n("p",ne,r(s.addressLine2),1)):v("",!0),s.city?(i(),n("p",re,r(s.city)+r(s.stateProvince?", "+s.stateProvince:"")+" "+r(s.postalCode),1)):v("",!0)])])):v("",!0),s.latitude&&s.longitude?(i(),n("div",de,[d(a(Y),{class:"h-4 w-4 mr-1"}),g(" "+r(s.latitude.toFixed(6))+", "+r(s.longitude.toFixed(6)),1)])):v("",!0)]),e("div",ue,[e("button",{class:"flex-1 inline-flex items-center justify-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",onClick:j=>F(s)},[d(a(K),{class:"h-4 w-4 mr-1.5"}),t[14]||(t[14]=g(" Edit ",-1))],8,ce),e("button",{class:"inline-flex items-center justify-center px-3 py-2 text-sm font-medium text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",onClick:j=>$(s)},[d(a(W),{class:"h-4 w-4"})],8,me)])])]))),128))])):(i(),n("div",pe,[e("div",ve,[e("div",ye,[d(a(U),{class:"h-8 w-8 text-primary-600"})]),t[16]||(t[16]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"}," No locations yet ",-1)),t[17]||(t[17]=e("p",{class:"text-gray-600 mb-6"}," Get started by adding your first facility location ",-1)),e("button",{class:"btn-primary inline-flex items-center",onClick:w},[d(a(M),{class:"h-5 w-5 mr-2"}),t[15]||(t[15]=g(" Add Your First Location ",-1))])])]))]),d(_,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:k(()=>[x.value?(i(),n("div",{key:0,class:"modal-overlay",onClick:N(L,["self"])},[d(_,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:k(()=>[e("div",fe,[e("div",be,[e("div",ge,[e("h2",xe,r(c.value?"Edit Location":"Add New Location"),1),e("button",{type:"button",class:"text-gray-400 hover:text-gray-600 transition-colors",onClick:L},[d(a(S),{class:"h-6 w-6"})])]),e("form",{class:"space-y-5",onSubmit:N(P,["prevent"])},[e("div",Le,[e("div",null,[t[18]||(t[18]=e("label",{for:"locationCode",class:"form-label"}," Location Code * ",-1)),m(e("input",{id:"locationCode","onUpdate:modelValue":t[1]||(t[1]=s=>o.value.locationCode=s),type:"text",required:"",disabled:c.value,class:A(["form-input",{"bg-gray-50":c.value}]),placeholder:"LOC001"},null,10,Ce),[[p,o.value.locationCode]]),t[19]||(t[19]=e("p",{class:"form-helper"}," Unique identifier (cannot be changed) ",-1))]),e("div",null,[t[20]||(t[20]=e("label",{for:"locationName",class:"form-label"}," Location Name * ",-1)),m(e("input",{id:"locationName","onUpdate:modelValue":t[2]||(t[2]=s=>o.value.locationName=s),type:"text",required:"",class:"form-input",placeholder:"Main Office"},null,512),[[p,o.value.locationName]])])]),e("div",null,[t[21]||(t[21]=e("label",{for:"addressLine1",class:"form-label"}," Address Line 1 ",-1)),m(e("input",{id:"addressLine1","onUpdate:modelValue":t[3]||(t[3]=s=>o.value.addressLine1=s),type:"text",class:"form-input",placeholder:"123 Main Street"},null,512),[[p,o.value.addressLine1]])]),e("div",null,[t[22]||(t[22]=e("label",{for:"addressLine2",class:"form-label"}," Address Line 2 ",-1)),m(e("input",{id:"addressLine2","onUpdate:modelValue":t[4]||(t[4]=s=>o.value.addressLine2=s),type:"text",class:"form-input",placeholder:"Suite 100"},null,512),[[p,o.value.addressLine2]])]),e("div",ke,[e("div",null,[t[23]||(t[23]=e("label",{for:"city",class:"form-label"}," City ",-1)),m(e("input",{id:"city","onUpdate:modelValue":t[5]||(t[5]=s=>o.value.city=s),type:"text",class:"form-input",placeholder:"Seattle"},null,512),[[p,o.value.city]])]),e("div",null,[t[24]||(t[24]=e("label",{for:"stateProvince",class:"form-label"}," State/Province ",-1)),m(e("input",{id:"stateProvince","onUpdate:modelValue":t[6]||(t[6]=s=>o.value.stateProvince=s),type:"text",class:"form-input",placeholder:"WA"},null,512),[[p,o.value.stateProvince]])]),e("div",null,[t[25]||(t[25]=e("label",{for:"postalCode",class:"form-label"}," Postal Code ",-1)),m(e("input",{id:"postalCode","onUpdate:modelValue":t[7]||(t[7]=s=>o.value.postalCode=s),type:"text",class:"form-input",placeholder:"98101"},null,512),[[p,o.value.postalCode]])])]),e("div",we,[e("div",null,[t[26]||(t[26]=e("label",{for:"latitude",class:"form-label"}," Latitude ",-1)),m(e("input",{id:"latitude","onUpdate:modelValue":t[8]||(t[8]=s=>o.value.latitude=s),type:"number",step:"0.000001",class:"form-input",placeholder:"47.606209"},null,512),[[p,o.value.latitude,void 0,{number:!0}]])]),e("div",null,[t[27]||(t[27]=e("label",{for:"longitude",class:"form-label"}," Longitude ",-1)),m(e("input",{id:"longitude","onUpdate:modelValue":t[9]||(t[9]=s=>o.value.longitude=s),type:"number",step:"0.000001",class:"form-input",placeholder:"-122.332069"},null,512),[[p,o.value.longitude,void 0,{number:!0}]])])]),c.value?(i(),n("div",he,[m(e("input",{id:"isActive","onUpdate:modelValue":t[10]||(t[10]=s=>o.value.isActive=s),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[q,o.value.isActive]]),t[28]||(t[28]=e("label",{for:"isActive",class:"ml-2 block text-sm text-gray-700"}," Active location ",-1))])):v("",!0),e("div",Ae,[e("button",{type:"submit",disabled:f.value,class:"btn-primary flex-1"},[f.value?(i(),n("span",Ue,[t[29]||(t[29]=e("div",{class:"spinner mr-2"},null,-1)),g(" "+r(c.value?"Updating...":"Creating..."),1)])):(i(),n("span",Ne,r(c.value?"Update Location":"Create Location"),1))],8,_e),e("button",{type:"button",disabled:f.value,class:"btn-outline",onClick:L}," Cancel ",8,Me)])],32)])])]),_:1})])):v("",!0)]),_:1})]),_:1}))}};export{Oe as default};
